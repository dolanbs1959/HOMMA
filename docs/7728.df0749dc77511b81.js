"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7728],{6400:(ne,Y,m)=>{m.d(Y,{C_:()=>A,io:()=>j,w8:()=>G});var u=m(1528);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var k=function(s){return s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE",s}(k||{});class D extends Error{constructor(o,a,n){super(o),this.message=o,this.code=a,this.data=n}}const W=s=>{var o,a,n,l,i;const r=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},c=t.Plugins=t.Plugins||{},d=s.CapacitorPlatforms,w=(null===(o=null==d?void 0:d.currentPlatform)||void 0===o?void 0:o.getPlatform)||(()=>null!==r?r.name:(s=>{var o,a;return null!=s&&s.androidBridge?"android":null!==(a=null===(o=null==s?void 0:s.webkit)||void 0===o?void 0:o.messageHandlers)&&void 0!==a&&a.bridge?"ios":"web"})(s)),de=(null===(a=null==d?void 0:d.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==w()),pe=(null===(n=null==d?void 0:d.currentPlatform)||void 0===n?void 0:n.isPluginAvailable)||(v=>{const h=ee.get(v);return!!(null!=h&&h.platforms.has(w())||se(v))}),se=(null===(l=null==d?void 0:d.currentPlatform)||void 0===l?void 0:l.getPluginHeader)||(v=>{var h;return null===(h=t.PluginHeaders)||void 0===h?void 0:h.find(M=>M.name===v)}),ee=new Map,ge=(null===(i=null==d?void 0:d.currentPlatform)||void 0===i?void 0:i.registerPlugin)||((v,h={})=>{const M=ee.get(v);if(M)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),M.proxy;const $=w(),F=se(v);let R;const be=function(){var g=(0,u.c)(function*(){return!R&&$ in h?R=R="function"==typeof h[$]?yield h[$]():h[$]:null!==r&&!R&&"web"in h&&(R=R="function"==typeof h.web?yield h.web():h.web),R});return function(){return g.apply(this,arguments)}}(),te=g=>{let b;const y=(...E)=>{const _=be().then(P=>{const T=((g,b)=>{var y,E;if(!F){if(g)return null===(E=g[b])||void 0===E?void 0:E.bind(g);throw new D(`"${v}" plugin is not implemented on ${$}`,k.Unimplemented)}{const _=null==F?void 0:F.methods.find(P=>b===P.name);if(_)return"promise"===_.rtype?P=>t.nativePromise(v,b.toString(),P):(P,T)=>t.nativeCallback(v,b.toString(),P,T);if(g)return null===(y=g[b])||void 0===y?void 0:y.bind(g)}})(P,g);if(T){const U=T(...E);return b=null==U?void 0:U.remove,U}throw new D(`"${v}.${g}()" is not implemented on ${$}`,k.Unimplemented)});return"addListener"===g&&(_.remove=(0,u.c)(function*(){return b()})),_};return y.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(y,"name",{value:g,writable:!1,configurable:!1}),y},le=te("addListener"),ce=te("removeListener"),Pe=(g,b)=>{const y=le({eventName:g},b),E=function(){var P=(0,u.c)(function*(){const T=yield y;ce({eventName:g,callbackId:T},b)});return function(){return P.apply(this,arguments)}}(),_=new Promise(P=>y.then(()=>P({remove:E})));return _.remove=(0,u.c)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield E()}),_},oe=new Proxy({},{get(g,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return F?Pe:le;case"removeListener":return ce;default:return te(b)}}});return c[v]=oe,ee.set(v,{name:v,proxy:oe,platforms:new Set([...Object.keys(h),...F?[$]:[]])}),oe});return t.convertFileSrc||(t.convertFileSrc=v=>v),t.getPlatform=w,t.handleError=v=>s.console.error(v),t.isNativePlatform=de,t.isPluginAvailable=pe,t.pluginMethodNoop=(v,h,M)=>Promise.reject(`${M} does not have an implementation of "${h}".`),t.registerPlugin=ge,t.Exception=D,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t.platform=t.getPlatform(),t.isNative=t.isNativePlatform(),t},I=(s=>s.Capacitor=W(s))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),A=I.registerPlugin;class G{constructor(o){this.listeners={},this.windowListeners={},o&&(console.warn(`Capacitor WebPlugin "${o.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=o)}addListener(o,a){var n=this;this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(a);const i=this.windowListeners[o];i&&!i.registered&&this.addWindowListener(i);const r=function(){var c=(0,u.c)(function*(){return n.removeListener(o,a)});return function(){return c.apply(this,arguments)}}(),t=Promise.resolve({remove:r});return Object.defineProperty(t,"remove",{value:(c=(0,u.c)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield r()}),function(){return c.apply(this,arguments)})}),t;var c}removeAllListeners(){var o=this;return(0,u.c)(function*(){o.listeners={};for(const a in o.windowListeners)o.removeWindowListener(o.windowListeners[a]);o.windowListeners={}})()}notifyListeners(o,a){const n=this.listeners[o];n&&n.forEach(l=>l(a))}hasListeners(o){return!!this.listeners[o].length}registerWindowListener(o,a){this.windowListeners[a]={registered:!1,windowEventName:o,pluginEventName:a,handler:n=>{this.notifyListeners(a,n)}}}unimplemented(o="not implemented"){return new I.Exception(o,k.Unimplemented)}unavailable(o="not available"){return new I.Exception(o,k.Unavailable)}removeListener(o,a){var n=this;return(0,u.c)(function*(){const l=n.listeners[o];if(!l)return;const i=l.indexOf(a);n.listeners[o].splice(i,1),n.listeners[o].length||n.removeWindowListener(n.windowListeners[o])})()}addWindowListener(o){window.addEventListener(o.windowEventName,o.handler),o.registered=!0}removeWindowListener(o){o&&(window.removeEventListener(o.windowEventName,o.handler),o.registered=!1)}}const S=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),N=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Q extends G{getCookies(){return(0,u.c)(function*(){const o=document.cookie,a={};return o.split(";").forEach(n=>{if(n.length<=0)return;let[l,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=N(l).trim(),i=N(i).trim(),a[l]=i}),a})()}setCookie(o){return(0,u.c)(function*(){try{const a=S(o.key),n=S(o.value),l=`; expires=${(o.expires||"").replace("expires=","")}`,i=(o.path||"/").replace("path=",""),r=null!=o.url&&o.url.length>0?`domain=${o.url}`:"";document.cookie=`${a}=${n||""}${l}; path=${i}; ${r};`}catch(a){return Promise.reject(a)}})()}deleteCookie(o){return(0,u.c)(function*(){try{document.cookie=`${o.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}})()}clearCookies(){return(0,u.c)(function*(){try{const o=document.cookie.split(";")||[];for(const a of o)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(o){return Promise.reject(o)}})()}clearAllCookies(){var o=this;return(0,u.c)(function*(){try{yield o.clearCookies()}catch(a){return Promise.reject(a)}})()}}A("CapacitorCookies",{web:()=>new Q});const z=function(){var s=(0,u.c)(function*(o){return new Promise((a,n)=>{const l=new FileReader;l.onload=()=>{const i=l.result;a(i.indexOf(",")>=0?i.split(",")[1]:i)},l.onerror=i=>n(i),l.readAsDataURL(o)})});return function(a){return s.apply(this,arguments)}}(),j=(s,o={})=>{const a=Object.assign({method:s.method||"GET",headers:s.headers},o),l=((s={})=>{const o=Object.keys(s);return Object.keys(s).map(l=>l.toLocaleLowerCase()).reduce((l,i,r)=>(l[i]=s[o[r]],l),{})})(s.headers)["content-type"]||"";if("string"==typeof s.data)a.body=s.data;else if(l.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[r,t]of Object.entries(s.data||{}))i.set(r,t);a.body=i.toString()}else if(l.includes("multipart/form-data")||s.data instanceof FormData){const i=new FormData;if(s.data instanceof FormData)s.data.forEach((t,c)=>{i.append(c,t)});else for(const t of Object.keys(s.data))i.append(t,s.data[t]);a.body=i;const r=new Headers(a.headers);r.delete("content-type"),a.headers=r}else(l.includes("application/json")||"object"==typeof s.data)&&(a.body=JSON.stringify(s.data));return a};class X extends G{request(o){return(0,u.c)(function*(){const a=j(o,o.webFetchExtra),n=((s,o=!0)=>s?Object.entries(s).reduce((n,l)=>{const[i,r]=l;let t,c;return Array.isArray(r)?(c="",r.forEach(d=>{t=o?encodeURIComponent(d):d,c+=`${i}=${t}&`}),c.slice(0,-1)):(t=o?encodeURIComponent(r):r,c=`${i}=${t}`),`${n}&${c}`},"").substr(1):null)(o.params,o.shouldEncodeUrlParams),l=n?`${o.url}?${n}`:o.url,i=yield fetch(l,a),r=i.headers.get("content-type")||"";let c,d,{responseType:t="text"}=i.ok?o:{};switch(r.includes("application/json")&&(t="json"),t){case"arraybuffer":case"blob":d=yield i.blob(),c=yield z(d);break;case"json":c=yield i.json();break;default:c=yield i.text()}const O={};return i.headers.forEach((w,Z)=>{O[Z]=w}),{data:c,headers:O,status:i.status,url:i.url}})()}get(o){var a=this;return(0,u.c)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"GET"}))})()}post(o){var a=this;return(0,u.c)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"POST"}))})()}put(o){var a=this;return(0,u.c)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"PUT"}))})()}patch(o){var a=this;return(0,u.c)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"PATCH"}))})()}delete(o){var a=this;return(0,u.c)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"DELETE"}))})()}}A("CapacitorHttp",{web:()=>new X})},5404:(ne,Y,m)=>{m.d(Y,{Gq:()=>p,Y9:()=>u});var u=function(f){return f.Documents="DOCUMENTS",f.Data="DATA",f.Library="LIBRARY",f.Cache="CACHE",f.External="EXTERNAL",f.ExternalStorage="EXTERNAL_STORAGE",f}(u||{}),p=function(f){return f.UTF8="utf8",f.ASCII="ascii",f.UTF16="utf16",f}(p||{})},7728:(ne,Y,m)=>{m.r(Y),m.d(Y,{ObservationReportPageModule:()=>a});var u=m(1368),p=m(2112),C=m(4716),x=m(4180),f=m(5768),L=m(1528),e=m(4496);const k=["videoElement"],D=["canvasElement"],H=["imageElement"];let W=(()=>{var n;class l{constructor(r,t){this.dialogRef=r,this.data=t,this.photoCaptured=new e._w7}ngOnInit(){}onTakePhoto(){navigator.mediaDevices.getUserMedia({video:!0}).then(r=>{this.stream=r,this.videoElement.nativeElement.srcObject=r}).catch(r=>{console.error("Error accessing camera: ",r)})}capturePhoto(){const r=this.canvasElement.nativeElement,t=r.getContext("2d");r.width=100,r.height=75,t.drawImage(this.videoElement.nativeElement,0,0,r.width,r.height);const O=r.toDataURL("image/png");this.imageElement.nativeElement.src=O,this.photoCaptured.emit(O),this.stream&&this.stream.getTracks().forEach(w=>w.stop())}onSelectPhoto(){this.dialogRef.close()}}return(n=l).\u0275fac=function(r){return new(r||n)(e.GI1(f.yI),e.GI1(f.sR))},n.\u0275cmp=e.In1({type:n,selectors:[["app-select-photo-dialog"]],viewQuery:function(r,t){if(1&r&&(e.CC$(k,5),e.CC$(D,5),e.CC$(H,5)),2&r){let c;e.wto(c=e.Gqi())&&(t.videoElement=c.first),e.wto(c=e.Gqi())&&(t.canvasElement=c.first),e.wto(c=e.Gqi())&&(t.imageElement=c.first)}},outputs:{photoCaptured:"photoCaptured"},decls:23,vars:1,consts:[[3,"translucent"],["color","Primary"],["mat-dialog-title",""],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-green",3,"click"],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-yellow",3,"click"],["autoplay",""],["videoElement",""],[2,"display","none"],["canvasElement",""],[3,"click"],["alt","UA photo","title","Photo of UA specimen"],["imageElement",""]],template:function(r,t){1&r&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e.OEk(3," HOM Mobile Assistant - Take Photo of UA Specimen "),e.C$Y()()(),e.I0R(4,"h2",2),e.OEk(5,"Select a photo"),e.C$Y(),e.I0R(6,"mat-dialog-content")(7,"p"),e.OEk(8,"Would you like to take a new photo or select a photo from the gallery?"),e.C$Y()(),e.I0R(9,"mat-dialog-actions")(10,"div",3),e.qCj("click",function(){return t.onTakePhoto()}),e.OEk(11," Take Photo "),e.C$Y(),e.I0R(12,"div",4),e.qCj("click",function(){return t.onSelectPhoto()}),e.OEk(13," Select Photo "),e.C$Y()(),e.I0R(14,"p"),e.wR5(15,"video",5,6)(17,"canvas",7,8),e.C$Y(),e.I0R(19,"ion-button",9),e.qCj("click",function(){return t.capturePhoto()}),e.OEk(20,"Snap Photo"),e.C$Y(),e.wR5(21,"img",10,11)),2&r&&e.E7m("translucent",!0)},dependencies:[p.sn,p.wB,p.tM,p.Md,f.WQ,f.Yp,f.iU],styles:[".ripple-effect-green[_ngcontent-%COMP%]{color:#09bc0c98}.ripple-effect-yellow[_ngcontent-%COMP%]{color:#cf0}.ripple-effect-orange[_ngcontent-%COMP%]{color:#fb0}video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;text-align:center;height:100px;width:200px;margin:0 auto}b[_ngcontent-%COMP%]{width:100%}.ripple-parent[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;border:1px solid #4194ab;width:100%;height:50px;border-radius:8px}.rounded-rectangle[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}"]}),l})();var q=m(6400),I=m(5404);const A=(0,q.C_)("Filesystem",{web:()=>m.e(7688).then(m.bind(m,7688)).then(n=>new n.FilesystemWeb)}),B=(0,q.C_)("Share",{web:()=>m.e(1852).then(m.bind(m,1852)).then(n=>new n.ShareWeb)});var K=m(6716),G=m(4628);function re(n,l){if(1&n&&(e.I0R(0,"ion-select-option",25),e.OEk(1),e.C$Y()),2&n){const i=l.$implicit;e.E7m("value",i.id),e.yG2(),e.cNF(i)}}function S(n,l){1&n&&(e.I0R(0,"div"),e.OEk(1," Invalid input: Please select an observation type "),e.C$Y())}function N(n,l){1&n&&(e.I0R(0,"div"),e.OEk(1," Invalid input: Please select an observation tone "),e.C$Y())}function Q(n,l){1&n&&(e.I0R(0,"div"),e.OEk(1," Invalid input: Please select an observation class\n"),e.C$Y())}function ie(n,l){if(1&n){const i=e.KQA();e.I0R(0,"div",26)(1,"ion-button",27),e.qCj("click",function(){e.usT(i);const t=e.GaO();return e.CGJ(t.openSelectPhotoDialog())}),e.OEk(2," Click to take/select photo of UA specimen\n"),e.C$Y()()}}function z(n,l){if(1&n){const i=e.KQA();e.I0R(0,"div"),e.wR5(1,"img",28),e.I0R(2,"ion-button",29),e.qCj("click",function(){e.usT(i);const t=e.GaO();return e.CGJ(t.savePhoto())}),e.OEk(3,"Save Photo"),e.C$Y(),e.wR5(4,"img",28),e.I0R(5,"ion-button",29),e.qCj("click",function(){e.usT(i);const t=e.GaO();return e.CGJ(t.getPhoto(t.savedPhotoPath))}),e.OEk(6,"View Photo"),e.C$Y(),e.I0R(7,"ion-button",29),e.qCj("click",function(){e.usT(i);const t=e.GaO();return e.CGJ(t.sharePhoto())}),e.OEk(8,"Share Photo"),e.C$Y()()}if(2&n){const i=e.GaO();e.yG2(),e.E7m("src",i.capturedPhoto,e.K6U),e.yG2(),e.E7m("disabled",!i.capturedPhoto),e.yG2(2),e.E7m("src",i.photoDataUrl,e.K6U),e.yG2(),e.E7m("disabled",!i.capturedPhoto),e.yG2(2),e.E7m("disabled",!i.capturedPhoto)}}function J(n,l){1&n&&(e.I0R(0,"div"),e.OEk(1," Invalid input: Please enter a detailed description "),e.C$Y())}function V(n,l){1&n&&(e.I0R(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.OEk(3,"Overnight Request"),e.C$Y()(),e.I0R(4,"ion-list")(5,"ion-item")(6,"div",30)(7,"label"),e.OEk(8,"Departure Date & Time"),e.C$Y(),e.wR5(9,"ion-input",31),e.C$Y()(),e.wR5(10,"br"),e.I0R(11,"ion-item")(12,"div",30)(13,"label"),e.OEk(14,"Return Date & Time:"),e.C$Y(),e.wR5(15,"ion-input",32),e.C$Y()(),e.wR5(16,"br"),e.I0R(17,"ion-item")(18,"div",30)(19,"label"),e.OEk(20,"Location/Address:"),e.C$Y(),e.wR5(21,"ion-input",33),e.C$Y()(),e.I0R(22,"ion-item")(23,"div",30)(24,"label"),e.OEk(25,"County:"),e.C$Y(),e.wR5(26,"ion-input",34),e.C$Y()(),e.I0R(27,"ion-item")(28,"div",30)(29,"label"),e.OEk(30,"Emergency Contact:"),e.C$Y(),e.wR5(31,"ion-input",35),e.C$Y()(),e.I0R(32,"ion-item")(33,"div",30)(34,"label"),e.OEk(35,"Emergency Contact Phone:"),e.C$Y(),e.wR5(36,"ion-input",36),e.C$Y()(),e.I0R(37,"ion-select",37)(38,"ion-select-option",38),e.OEk(39,"Yes"),e.C$Y(),e.I0R(40,"ion-select-option",39),e.OEk(41,"No"),e.C$Y(),e.I0R(42,"ion-select-option",40),e.OEk(43,"N/A"),e.C$Y()(),e.I0R(44,"ion-select",41)(45,"ion-select-option",38),e.OEk(46,"Yes"),e.C$Y(),e.I0R(47,"ion-select-option",39),e.OEk(48,"No"),e.C$Y(),e.I0R(49,"ion-select-option",40),e.OEk(50,"N/A"),e.C$Y()(),e.I0R(51,"ion-select",42)(52,"ion-select-option",38),e.OEk(53,"Yes"),e.C$Y(),e.I0R(54,"ion-select-option",39),e.OEk(55,"No"),e.C$Y(),e.I0R(56,"ion-select-option",40),e.OEk(57,"N/A"),e.C$Y()(),e.I0R(58,"ion-select",43)(59,"ion-select-option",38),e.OEk(60,"Yes"),e.C$Y(),e.I0R(61,"ion-select-option",39),e.OEk(62,"No"),e.C$Y(),e.I0R(63,"ion-select-option",40),e.OEk(64,"N/A"),e.C$Y()(),e.I0R(65,"ion-item"),e.wR5(66,"ion-textarea",44),e.C$Y()()())}function j(n,l){if(1&n&&(e.I0R(0,"p"),e.OEk(1),e.C$Y()),2&n){const i=e.GaO();e.yG2(),e.oRS("Record Number: ",i.NewObservationRecordId,"")}}function X(n,l){if(1&n){const i=e.KQA();e.I0R(0,"div",24),e.qCj("click",function(){e.usT(i);const t=e.GaO();return e.CGJ(t.reportForm.valid&&t.insertObservationReport())}),e.OEk(1," Add Observation Report "),e.wR5(2,"ion-ripple-effect"),e.C$Y()}if(2&n){const i=e.GaO();e.eAK("disabled-button",!i.reportForm.valid)}}function ae(n,l){if(1&n){const i=e.KQA();e.I0R(0,"div",24),e.qCj("click",function(){e.usT(i);const t=e.GaO();return e.CGJ(t.resetForm())}),e.OEk(1," Reset Form "),e.wR5(2,"ion-ripple-effect"),e.C$Y()}}const o=[{path:"",component:(()=>{var n;class l{constructor(r,t,c,d,O){this.router=r,this.location=t,this.quickbaseService=c,this.formBuilder=d,this.dialog=O,this.photoCaptured=new e._w7,this.apiKey=K.O.apiKey,this.NewObservationRecordId=0,this.showRipple=!1,this.capturedPhoto="",this.savedPhotoPath="",this.photoDataUrl="",this.isLoading=!1,this.reportForm=this.formBuilder.group({observationType:["",C.AQ.required],observationTone:["",C.AQ.required],observationClass:["",C.AQ.required],observationDescription:["",C.AQ.required],DepartureDateTime:[""],ReturnDateTime:[""],LocationAddress:[""],County:[""],EmergencyContactName:[""],EmergencyContactPhone:[""],ccoApproved:[""],sotpApproved:[""],safetyPlan:[""],attendMeeting:[""],ReasonForRequest:[""]})}savePhoto(){var r=this;return(0,L.c)(function*(){if(!r.capturedPhoto||!r.capturedPhoto.startsWith("data:image/")||!r.capturedPhoto.includes(","))return console.error("No photo yet"),Promise.resolve(null);const t=r.capturedPhoto.split(",")[1],c=Date.now()+".jpeg";try{const d=yield A.writeFile({path:c,data:t,directory:I.Y9.Data});return r.savedPhotoPath=d.uri,yield B.share({title:"My Photo",text:"Here is a photo I took",url:r.photoDataUrl,dialogTitle:"Share my photo"}),{filepath:c,webviewPath:r.capturedPhoto}}catch(d){return console.error("Failed to save photo to filesystem",d),Promise.reject(d)}})()}getPhoto(r){var t=this;return(0,L.c)(function*(){try{const c=yield A.readFile({path:t.savedPhotoPath});t.photoDataUrl="data:image/jpeg;base64,"+c.data}catch(c){return console.error("Failed to read photo from filesystem",c),Promise.reject(c)}})()}onObservationTypeChange(r){this.showRipple="Dirty UA"===r.name}sharePhoto(){var r=this;return(0,L.c)(function*(){try{const t=r.savedPhotoPath;yield B.share({title:"My Photo",text:"Here is a photo I took",url:t,dialogTitle:"Share my photo"})}catch(t){console.error("Failed to share photo",t)}})()}openSelectPhotoDialog(){const r=this.dialog.open(W,{width:"250px"});r.componentInstance.photoCaptured.subscribe(t=>{this.capturedPhoto=t,r.close()}),this.savePhoto()}addObservationReport(){this.router.navigate(["/home/observation-report"])}insertObservationReport(){this.isLoading=!0,this.quickbaseService.observationreport({194:{value:this.residentData.recordNumber2.value},7:{value:this.reportForm.value.observationType},51:{value:this.reportForm.value.observationTone},94:{value:this.reportForm.value.observationClass},8:{value:this.reportForm.value.observationDescription},119:{value:this.reportForm.value.DepartureDateTime},120:{value:this.reportForm.value.ReturnDateTime},121:{value:this.reportForm.value.LocationAddress},131:{value:this.reportForm.value.County},122:{value:this.reportForm.value.EmergencyContactName},123:{value:this.reportForm.value.EmergencyContactPhone},124:{value:this.reportForm.value.ccoApproved},125:{value:this.reportForm.value.sotpApproved},126:{value:this.reportForm.value.safetyPlan},127:{value:this.reportForm.value.ReasonForRequest},128:{value:this.reportForm.value.attendMeeting}}).subscribe(t=>{console.log("Observation Report inserted successfully",t),this.NewObservationRecordId=t.data[0][3].value,console.log("New Observation Record ID:",this.NewObservationRecordId),this.isLoading=!1;const c=`\n  <qdbapi>\n  <apptoken>${K.O.apiKey}</apptoken>\n  <rid>${this.NewObservationRecordId}</rid>\n  <field fid="59" filename="dirtyUA.png">${this.capturedPhoto.split(",")[1].replace(/\n/g,"")}</field>\n  </qdbapi>\n  `;this.quickbaseService.uploadFile(c).subscribe(d=>{console.log("File uploaded successfully",d)},d=>{console.error("Error uploading file",d)})},t=>{console.error("Error inserting record",t)})}resetForm(){this.reportForm.reset(),this.NewObservationRecordId=0}goBack(){this.location.back()}ngOnInit(){const r=this.reportForm.get("observationType");r&&r.valueChanges.subscribe(c=>{this.onObservationTypeChange(c)});const t=this.router.getCurrentNavigation();t&&t.extras.state&&(this.residentData=t.extras.state.residentData,console.log("Resident Data:",this.residentData)),this.quickbaseService.getDropdownChoices().subscribe(c=>{this.dropdownChoices=c.properties.choices,console.log("Dropdown Choices:",this.dropdownChoices)})}}return(n=l).\u0275fac=function(r){return new(r||n)(e.GI1(x.E5),e.GI1(u.oB),e.GI1(G.i),e.GI1(C.im),e.GI1(f.qW))},n.\u0275cmp=e.In1({type:n,selectors:[["HOMMA-observationreport"]],inputs:{photo:"photo"},outputs:{photoCaptured:"photoCaptured"},decls:56,vars:16,consts:[[3,"translucent"],["color","Primary"],[3,"fullscreen"],[1,"ion-text-center"],["src","assets/logo/HOM.png","alt","Logo"],[3,"innerHTML"],[3,"formGroup"],["formControlName","observationType","label","Observation Type","interface","action-sheet","placeholder","Select the observation type","cancelText","Cancel Choice","label-placement","floating","fill","outline"],[3,"value",4,"ngFor","ngForOf"],[1,"error-message-text"],[4,"ngIf"],["formControlName","observationTone","label","Observation Tone","interface","action-sheet","placeholder","What is the particapant's emotion","label-placement","floating","fill","outline"],["value","Humble"],["value","Hostile"],["value","No Emotion"],["formControlName","observationClass","label","Observation Class","interface","action-sheet","placeholder","Is the observation positive, negative, or neutral?","label-placement","floating","fill","outline"],["value","Positive"],["value","Negative"],["value","Neutral"],["class","center-div",4,"ngIf"],["formControlName","observationDescription","label","Observation Description","labelPlacement","floating","placeholder","Please enter full details of the observation here","value","","autoGrow","true",1,"bordered-input"],[1,"wrapper"],["class","ion-activatable ripple-parent rounded-rectangle ripple-effect-blue",3,"disabled-button","click",4,"ngIf"],["class","ion-activatable ripple-parent rounded-rectangle ripple-effect-blue",3,"click",4,"ngIf"],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-blue",3,"click"],[3,"value"],[1,"center-div"],[3,"click"],["alt","Photo placeholder",3,"src"],[3,"disabled","click"],[1,"stacked-label"],["type","datetime-local","formControlName","DepartureDateTime"],["type","datetime-local","formControlName","ReturnDateTime"],["type","text","formControlName","LocationAddress","placeholder","Enter Location/Address"],["type","text","formControlName","County","placeholder","Enter County"],["type","text","formControlName","EmergencyContactName","placeholder","Enter Emergency Contact Name"],["type","text","formControlName","EmergencyContactPhone","placeholder","Enter Emergency Contact Phone"],["formControlName","ccoApproved","label","CCO Approved?","interface","action-sheet","placeholder","Select option for CCO Approval","label-placement","floating","fill","outline"],["value","Yes"],["value","No"],["value","N/A"],["formControlName","sotpApproved","label","SOTP Therapist Approved?","interface","action-sheet","placeholder","Select option for SOTP Therapist Approval","label-placement","floating","fill","outline"],["formControlName","safetyPlan","label","Safety Plan Required?","interface","action-sheet","placeholder","Select option if a safety plan is required","label-placement","floating","fill","outline"],["formControlName","attendMeeting","label","Attend Required Meeting?","interface","action-sheet","placeholder","Select option if a attending the meeting is required","label-placement","floating","fill","outline"],["formControlName","ReasonForRequest","label","Reason For Request","labelPlacement","floating","placeholder","Please enter reason for the overnight request here","value","","autoGrow","true",1,"bordered-input"]],template:function(r,t){if(1&r&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e.OEk(3," HOM Mobile Assistant - Add Observation Report "),e.C$Y()()(),e.I0R(4,"ion-content",2)(5,"ion-card",3),e.wR5(6,"img",4)(7,"br"),e.I0R(8,"ion-card-header"),e.OEk(9," Add an Observation Report for: "),e.I0R(10,"ion-card-subtitle"),e.wR5(11,"br")(12,"div",5),e.OEk(13),e.C$Y()()(),e.I0R(14,"ion-card")(15,"ion-list",6)(16,"ion-select",7),e.yuY(17,re,2,2,"ion-select-option",8),e.C$Y(),e.I0R(18,"div",9),e.yuY(19,S,2,0,"div",10),e.C$Y(),e.I0R(20,"ion-select",11)(21,"ion-select-option",12),e.OEk(22,"Humble"),e.C$Y(),e.I0R(23,"ion-select-option",13),e.OEk(24,"Hostile"),e.C$Y(),e.I0R(25,"ion-select-option",14),e.OEk(26,"No emotion"),e.C$Y()(),e.I0R(27,"div",9),e.yuY(28,N,2,0,"div",10),e.C$Y(),e.I0R(29,"ion-select",15)(30,"ion-select-option",16),e.OEk(31,"Positive"),e.C$Y(),e.I0R(32,"ion-select-option",17),e.OEk(33,"Negative"),e.C$Y(),e.I0R(34,"ion-select-option",18),e.OEk(35,"Neutral"),e.C$Y()(),e.I0R(36,"div",9),e.yuY(37,Q,2,0,"div",10),e.C$Y(),e.wR5(38,"br"),e.yuY(39,ie,3,0,"div",19),e.wR5(40,"br"),e.yuY(41,z,9,5,"div",10),e.I0R(42,"ion-list")(43,"ion-item"),e.wR5(44,"ion-textarea",20),e.C$Y(),e.I0R(45,"div",9),e.yuY(46,J,2,0,"div",10),e.C$Y(),e.yuY(47,V,67,0,"ion-card",10),e.I0R(48,"div",21),e.yuY(49,j,2,1,"p",10)(50,X,3,2,"div",22)(51,ae,3,0,"div",23),e.wR5(52,"br"),e.I0R(53,"div",24),e.qCj("click",function(){return t.goBack()}),e.OEk(54," Back/Start Over "),e.wR5(55,"ion-ripple-effect"),e.C$Y()()()()()()),2&r){let c,d;e.E7m("translucent",!0),e.yG2(4),e.E7m("fullscreen",!0),e.yG2(8),e.E7m("innerHTML",t.residentData.residentPhoto.value,e.E3n),e.yG2(),e.oRS(" ",t.residentData.residentFullName.value," "),e.yG2(2),e.E7m("formGroup",t.reportForm),e.yG2(2),e.E7m("ngForOf",t.dropdownChoices),e.yG2(2),e.E7m("ngIf",(null==t.reportForm.controls.observationType?null:t.reportForm.controls.observationType.invalid)&&t.reportForm.controls.observationType.touched),e.yG2(9),e.E7m("ngIf",(null==t.reportForm.controls.observationTone?null:t.reportForm.controls.observationTone.invalid)&&t.reportForm.controls.observationTone.touched),e.yG2(9),e.E7m("ngIf",(null==t.reportForm.controls.observationClass?null:t.reportForm.controls.observationClass.invalid)&&t.reportForm.controls.observationClass.touched),e.yG2(2),e.E7m("ngIf","Dirty UA"===(null==(c=t.reportForm.get("observationType"))?null:c.value)),e.yG2(2),e.E7m("ngIf",t.capturedPhoto),e.yG2(5),e.E7m("ngIf",(null==t.reportForm.controls.observationDescription?null:t.reportForm.controls.observationDescription.invalid)&&t.reportForm.controls.observationDescription.touched),e.yG2(),e.E7m("ngIf","Overnight Request"===(null==(d=t.reportForm.get("observationType"))?null:d.value)),e.yG2(2),e.E7m("ngIf",t.NewObservationRecordId),e.yG2(),e.E7m("ngIf",!t.NewObservationRecordId),e.yG2(),e.E7m("ngIf",t.NewObservationRecordId)}},dependencies:[u.ay,u.u_,C.ue,C.u,p.sn,p.KC,p.YY,p.MN,p.I7,p._i,p.wB,p.A5,p.Yb,p.OC,p.mA,p.Cy,p.gd,p.gP,p.tM,p.Md,p.IT,p.qG,C.uW,C.Wo],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color: #4194ab !important;--ion-color-base: #fff !important}ion-title[_ngcontent-%COMP%]{--ion-color-base: #fff !important;font-size:16px}ion-card-header[_ngcontent-%COMP%]{--padding-bottom: 0;font-size:16px;font-weight:700}ion-card-subtitle[_ngcontent-%COMP%]{--ion-color-base: #000 !important;font-size:12px;font-weight:inherit}ion-card-title[_ngcontent-%COMP%]{text-align:left}.error-message[_ngcontent-%COMP%]{color:red;font-size:20px;margin-top:10px}ion-card[_ngcontent-%COMP%]{justify-content:center}ion-card[_ngcontent-%COMP%]   .error-message-text[_ngcontent-%COMP%]{text-align:center;color:#87130a}ion-select[_ngcontent-%COMP%]{margin:0;padding:10px}form[_ngcontent-%COMP%]{margin:0;padding:10px}.ripple-effect-blue[_ngcontent-%COMP%]{color:#010384}.ripple-effect-lightblue[_ngcontent-%COMP%]{color:#00c8ff}.ripple-effect-orange[_ngcontent-%COMP%]{color:#6c5105;font-size:x-small}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;text-align:center;height:100px;width:200px;margin:0 auto}b[_ngcontent-%COMP%]{width:100%}.center-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%}.ripple-parent[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;border:1px solid #4194ab;width:100%;height:50px;border-radius:8px}.rounded-rectangle[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}.bordered-input[_ngcontent-%COMP%]{border:1px solid #4194ab;white-space:pre-wrap}.stacked-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#4194ab}ion-button[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 0px;--padding-bottom: 0px;--background: #87130a;--color: #fff;--border-radius: 8px;font-size:12px;font-weight:700}"]}),l})()}];let a=(()=>{var n;class l{}return(n=l).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.a4G({type:n}),n.\u0275inj=e.s3X({imports:[u.MD,C.y,p.wZ,C.sl,f.sr,x.qQ.forChild(o)]}),l})()}}]);