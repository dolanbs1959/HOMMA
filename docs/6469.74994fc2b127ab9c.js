"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6469],{2726:(te,q,g)=>{g.d(q,{Sd:()=>$,Uw:()=>I,fo:()=>k});var f=g(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var U=function(s){return s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE",s}(U||{});class L extends Error{constructor(t,i,c){super(t),this.message=t,this.code=i,this.data=c}}const G=s=>{var t,i,c,d,o;const l=s.CapacitorCustomPlatform||null,a=s.Capacitor||{},n=a.Plugins=a.Plugins||{},r=s.CapacitorPlatforms,m=(null===(t=null==r?void 0:r.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==l?l.name:(s=>{var t,i;return null!=s&&s.androidBridge?"android":null!==(i=null===(t=null==s?void 0:s.webkit)||void 0===t?void 0:t.messageHandlers)&&void 0!==i&&i.bridge?"ios":"web"})(s)),O=(null===(i=null==r?void 0:r.currentPlatform)||void 0===i?void 0:i.isNativePlatform)||(()=>"web"!==m()),pe=(null===(c=null==r?void 0:r.currentPlatform)||void 0===c?void 0:c.isPluginAvailable)||(h=>{const b=V.get(h);return!!(null!=b&&b.platforms.has(m())||le(h))}),le=(null===(d=null==r?void 0:r.currentPlatform)||void 0===d?void 0:d.getPluginHeader)||(h=>{var b;return null===(b=a.PluginHeaders)||void 0===b?void 0:b.find(N=>N.name===h)}),V=new Map,he=(null===(o=null==r?void 0:r.currentPlatform)||void 0===o?void 0:o.registerPlugin)||((h,b={})=>{const N=V.get(h);if(N)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),N.proxy;const R=m(),D=le(h);let T;const be=function(){var P=(0,f.Z)(function*(){return!T&&R in b?T=T="function"==typeof b[R]?yield b[R]():b[R]:null!==l&&!T&&"web"in b&&(T=T="function"==typeof b.web?yield b.web():b.web),T});return function(){return P.apply(this,arguments)}}(),X=P=>{let C;const w=(...x)=>{const A=be().then(Z=>{const E=((P,C)=>{var w,x;if(!D){if(P)return null===(x=P[C])||void 0===x?void 0:x.bind(P);throw new L(`"${h}" plugin is not implemented on ${R}`,U.Unimplemented)}{const A=null==D?void 0:D.methods.find(Z=>C===Z.name);if(A)return"promise"===A.rtype?Z=>a.nativePromise(h,C.toString(),Z):(Z,E)=>a.nativeCallback(h,C.toString(),Z,E);if(P)return null===(w=P[C])||void 0===w?void 0:w.bind(P)}})(Z,P);if(E){const J=E(...x);return C=null==J?void 0:J.remove,J}throw new L(`"${h}.${P}()" is not implemented on ${R}`,U.Unimplemented)});return"addListener"===P&&(A.remove=(0,f.Z)(function*(){return C()})),A};return w.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(w,"name",{value:P,writable:!1,configurable:!1}),w},ce=X("addListener"),de=X("removeListener"),Ce=(P,C)=>{const w=ce({eventName:P},C),x=function(){var Z=(0,f.Z)(function*(){const E=yield w;de({eventName:P,callbackId:E},C)});return function(){return Z.apply(this,arguments)}}(),A=new Promise(Z=>w.then(()=>Z({remove:x})));return A.remove=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield x()}),A},ee=new Proxy({},{get(P,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return D?Ce:ce;case"removeListener":return de;default:return X(C)}}});return n[h]=ee,V.set(h,{name:h,proxy:ee,platforms:new Set([...Object.keys(b),...D?[R]:[]])}),ee});return a.convertFileSrc||(a.convertFileSrc=h=>h),a.getPlatform=m,a.handleError=h=>s.console.error(h),a.isNativePlatform=O,a.isPluginAvailable=pe,a.pluginMethodNoop=(h,b,N)=>Promise.reject(`${N} does not have an implementation of "${b}".`),a.registerPlugin=he,a.Exception=L,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},M=(s=>s.Capacitor=G(s))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),k=M.registerPlugin;class I{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,i){var c=this;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(i);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o);const l=function(){var n=(0,f.Z)(function*(){return c.removeListener(t,i)});return function(){return n.apply(this,arguments)}}(),a=Promise.resolve({remove:l});return Object.defineProperty(a,"remove",{value:(n=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield l()}),function(){return n.apply(this,arguments)})}),a;var n}removeAllListeners(){var t=this;return(0,f.Z)(function*(){t.listeners={};for(const i in t.windowListeners)t.removeWindowListener(t.windowListeners[i]);t.windowListeners={}})()}notifyListeners(t,i){const c=this.listeners[t];c&&c.forEach(d=>d(i))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,i){this.windowListeners[i]={registered:!1,windowEventName:t,pluginEventName:i,handler:c=>{this.notifyListeners(i,c)}}}unimplemented(t="not implemented"){return new M.Exception(t,U.Unimplemented)}unavailable(t="not available"){return new M.Exception(t,U.Unavailable)}removeListener(t,i){var c=this;return(0,f.Z)(function*(){const d=c.listeners[t];if(!d)return;const o=d.indexOf(i);c.listeners[t].splice(o,1),c.listeners[t].length||c.removeWindowListener(c.windowListeners[t])})()}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}const j=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),H=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class W extends I{getCookies(){return(0,f.Z)(function*(){const t=document.cookie,i={};return t.split(";").forEach(c=>{if(c.length<=0)return;let[d,o]=c.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");d=H(d).trim(),o=H(o).trim(),i[d]=o}),i})()}setCookie(t){return(0,f.Z)(function*(){try{const i=j(t.key),c=j(t.value),d=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),l=null!=t.url&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${i}=${c||""}${d}; path=${o}; ${l};`}catch(i){return Promise.reject(i)}})()}deleteCookie(t){return(0,f.Z)(function*(){try{document.cookie=`${t.key}=; Max-Age=0`}catch(i){return Promise.reject(i)}})()}clearCookies(){return(0,f.Z)(function*(){try{const t=document.cookie.split(";")||[];for(const i of t)document.cookie=i.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(t){return Promise.reject(t)}})()}clearAllCookies(){var t=this;return(0,f.Z)(function*(){try{yield t.clearCookies()}catch(i){return Promise.reject(i)}})()}}k("CapacitorCookies",{web:()=>new W});const Q=function(){var s=(0,f.Z)(function*(t){return new Promise((i,c)=>{const d=new FileReader;d.onload=()=>{const o=d.result;i(o.indexOf(",")>=0?o.split(",")[1]:o)},d.onerror=o=>c(o),d.readAsDataURL(t)})});return function(i){return s.apply(this,arguments)}}(),$=(s,t={})=>{const i=Object.assign({method:s.method||"GET",headers:s.headers},t),d=((s={})=>{const t=Object.keys(s);return Object.keys(s).map(d=>d.toLocaleLowerCase()).reduce((d,o,l)=>(d[o]=s[t[l]],d),{})})(s.headers)["content-type"]||"";if("string"==typeof s.data)i.body=s.data;else if(d.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[l,a]of Object.entries(s.data||{}))o.set(l,a);i.body=o.toString()}else if(d.includes("multipart/form-data")||s.data instanceof FormData){const o=new FormData;if(s.data instanceof FormData)s.data.forEach((a,n)=>{o.append(n,a)});else for(const a of Object.keys(s.data))o.append(a,s.data[a]);i.body=o;const l=new Headers(i.headers);l.delete("content-type"),i.headers=l}else(d.includes("application/json")||"object"==typeof s.data)&&(i.body=JSON.stringify(s.data));return i};class K extends I{request(t){return(0,f.Z)(function*(){const i=$(t,t.webFetchExtra),c=((s,t=!0)=>s?Object.entries(s).reduce((c,d)=>{const[o,l]=d;let a,n;return Array.isArray(l)?(n="",l.forEach(r=>{a=t?encodeURIComponent(r):r,n+=`${o}=${a}&`}),n.slice(0,-1)):(a=t?encodeURIComponent(l):l,n=`${o}=${a}`),`${c}&${n}`},"").substr(1):null)(t.params,t.shouldEncodeUrlParams),d=c?`${t.url}?${c}`:t.url,o=yield fetch(d,i),l=o.headers.get("content-type")||"";let n,r,{responseType:a="text"}=o.ok?t:{};switch(l.includes("application/json")&&(a="json"),a){case"arraybuffer":case"blob":r=yield o.blob(),n=yield Q(r);break;case"json":n=yield o.json();break;default:n=yield o.text()}const u={};return o.headers.forEach((m,_)=>{u[_]=m}),{data:n,headers:u,status:o.status,url:o.url}})()}get(t){var i=this;return(0,f.Z)(function*(){return i.request(Object.assign(Object.assign({},t),{method:"GET"}))})()}post(t){var i=this;return(0,f.Z)(function*(){return i.request(Object.assign(Object.assign({},t),{method:"POST"}))})()}put(t){var i=this;return(0,f.Z)(function*(){return i.request(Object.assign(Object.assign({},t),{method:"PUT"}))})()}patch(t){var i=this;return(0,f.Z)(function*(){return i.request(Object.assign(Object.assign({},t),{method:"PATCH"}))})()}delete(t){var i=this;return(0,f.Z)(function*(){return i.request(Object.assign(Object.assign({},t),{method:"DELETE"}))})()}}k("CapacitorHttp",{web:()=>new K})},5346:(te,q,g)=>{g.d(q,{ez:()=>p,tP:()=>f});var f=function(v){return v.Documents="DOCUMENTS",v.Data="DATA",v.Library="LIBRARY",v.Cache="CACHE",v.External="EXTERNAL",v.ExternalStorage="EXTERNAL_STORAGE",v}(f||{}),p=function(v){return v.UTF8="utf8",v.ASCII="ascii",v.UTF16="utf16",v}(p||{})},6469:(te,q,g)=>{g.r(q),g.d(q,{ObservationReportPageModule:()=>d});var f=g(6814),p=g(849),y=g(95),F=g(4408),v=g(491),S=g(5861),e=g(9212);const U=["videoElement"],L=["canvasElement"],Y=["imageElement"];let G=(()=>{var o;class l{constructor(n,r){this.dialogRef=n,this.data=r,this.photoCaptured=new e.vpe}ngOnInit(){this.onTakePhoto()}onTakePhoto(){navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}}}).catch(()=>navigator.mediaDevices.getUserMedia({video:!0})).then(n=>{this.stream=n,this.videoElement&&this.videoElement.nativeElement?this.videoElement.nativeElement.srcObject=n:console.error("Video element not found!")}).catch(n=>{console.error("Error accessing camera: ",n),alert("Unable to access camera: "+n.message)})}capturePhoto(){const n=this.canvasElement.nativeElement,r=n.getContext("2d");n.width=640,n.height=480,r.drawImage(this.videoElement.nativeElement,0,0,n.width,n.height);const _=n.toDataURL("image/png");this.imageElement.nativeElement.src=_,this.photoCaptured.emit(_),this.stream&&this.stream.getTracks().forEach(O=>O.stop())}onSelectPhoto(){this.dialogRef.close()}}return(o=l).\u0275fac=function(n){return new(n||o)(e.Y36(v.so),e.Y36(v.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-select-photo-dialog"]],viewQuery:function(n,r){if(1&n&&(e.Gf(U,5),e.Gf(L,5),e.Gf(Y,5)),2&n){let u;e.iGM(u=e.CRH())&&(r.videoElement=u.first),e.iGM(u=e.CRH())&&(r.canvasElement=u.first),e.iGM(u=e.CRH())&&(r.imageElement=u.first)}},outputs:{photoCaptured:"photoCaptured"},decls:19,vars:1,consts:[[3,"translucent"],["color","Primary"],[1,"camera-container"],["src","assets/logo/HOM3.png","alt","Logo",1,"logo"],["autoplay","",1,"camera-view"],["videoElement",""],[1,"hidden-canvas"],["canvasElement",""],["alt","UA photo","title","Photo of UA specimen",1,"hidden-image"],["imageElement",""],[1,"dialog-actions"],["color","primary","size","large",3,"click"],["name","camera","slot","start"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e._uU(3," Snap Photo of UA Specimen "),e.qZA()()(),e.TgZ(4,"mat-dialog-content")(5,"div",2),e._UZ(6,"img",3),e.TgZ(7,"p"),e._uU(8,'Position the UA specimen in the camera view and tap "Take Photo" to capture.'),e.qZA(),e._UZ(9,"video",4,5)(11,"canvas",6,7)(13,"img",8,9),e.qZA()(),e.TgZ(15,"mat-dialog-actions",10)(16,"ion-button",11),e.NdJ("click",function(){return r.capturePhoto()}),e._UZ(17,"ion-icon",12),e._uU(18," Take Photo "),e.qZA()()),2&n&&e.Q6J("translucent",!0)},dependencies:[p.YG,p.Gu,p.gu,p.wd,p.sr,v.H8,v.xY],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color: #4194ab !important;--ion-color-base: #fff !important}ion-title[_ngcontent-%COMP%]{--ion-color-base: #fff !important;font-size:16px}ion-card-header[_ngcontent-%COMP%]{--padding-bottom: 0;font-size:16px;font-weight:700}ion-card-subtitle[_ngcontent-%COMP%]{--ion-color-base: #000 !important;font-size:12px;font-weight:inherit}ion-card-title[_ngcontent-%COMP%]{text-align:left}.error-message[_ngcontent-%COMP%]{color:red;font-size:20px;margin-top:10px}ion-card[_ngcontent-%COMP%]{justify-content:center}ion-card[_ngcontent-%COMP%]   .error-message-text[_ngcontent-%COMP%]{text-align:center;color:#87130a}ion-select[_ngcontent-%COMP%]{margin:0;padding:10px}.ripple-effect-green[_ngcontent-%COMP%]{color:#09bc0c98}.ripple-effect-yellow[_ngcontent-%COMP%]{color:#cf0}.ripple-effect-orange[_ngcontent-%COMP%]{color:#fb0}video[_ngcontent-%COMP%]{width:75%;height:75%;object-fit:cover}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;text-align:center;height:100px;width:200px;margin:0 auto}b[_ngcontent-%COMP%]{width:100%}.ripple-parent[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;border:1px solid #4194ab;width:100%;height:50px;border-radius:8px}.rounded-rectangle[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}.camera-container[_ngcontent-%COMP%]{text-align:center}.logo[_ngcontent-%COMP%]{max-width:200px}.camera-view[_ngcontent-%COMP%]{width:100%;max-width:640px;border:2px solid #ddd;border-radius:8px}.hidden-canvas[_ngcontent-%COMP%], .hidden-image[_ngcontent-%COMP%]{display:none}.dialog-actions[_ngcontent-%COMP%]{justify-content:center}"]}),l})();var oe=g(2726),M=g(5346);const k=(0,oe.fo)("Filesystem",{web:()=>g.e(4522).then(g.bind(g,4522)).then(o=>new o.FilesystemWeb)});var ne=g(553),re=g(6861),I=g(9669);function ie(o,l){if(1&o&&e._UZ(0,"img",26),2&o){const a=e.oxw(2);e.Q6J("src",a.residentData.residentPhoto,e.LSH)}}function j(o,l){if(1&o&&(e.TgZ(0,"div")(1,"h1"),e._uU(2),e.qZA(),e.YNc(3,ie,1,1,"img",25),e.qZA()),2&o){const a=e.oxw();e.xp6(2),e.Oqu(a.residentData.residentFullName.value),e.xp6(),e.Q6J("ngIf",a.residentData.residentPhoto)}}function H(o,l){if(1&o&&(e.TgZ(0,"ion-select-option",27),e._uU(1),e.qZA()),2&o){const a=l.$implicit;e.Q6J("value",a),e.xp6(),e.Oqu(a)}}function W(o,l){1&o&&(e.TgZ(0,"div"),e._uU(1," Invalid input: Please select an observation type "),e.qZA())}function ae(o,l){1&o&&(e.TgZ(0,"div"),e._uU(1," Invalid input: Please select an observation tone "),e.qZA())}function Q(o,l){1&o&&(e.TgZ(0,"div"),e._uU(1," Invalid input: Please select an observation class\n"),e.qZA())}function B(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"div",28)(1,"ion-button",29),e.NdJ("click",function(){e.CHM(a);const r=e.oxw();return e.KtG(r.openSelectPhotoDialog())}),e._uU(2," Tap here to take photo of the UA specimen\n"),e.qZA()()}}function z(o,l){if(1&o&&(e.TgZ(0,"div",28),e._UZ(1,"img",30)(2,"br"),e.qZA()),2&o){const a=e.oxw();e.xp6(),e.Q6J("src",a.capturedPhoto,e.LSH)}}function $(o,l){1&o&&(e.TgZ(0,"div"),e._uU(1," Invalid input: Please enter a detailed description "),e.qZA())}function K(o,l){1&o&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Overnight Request"),e.qZA()(),e.TgZ(4,"ion-list")(5,"ion-item")(6,"div",31)(7,"label"),e._uU(8,"Departure Date & Time"),e.qZA(),e._UZ(9,"ion-input",32),e.qZA()(),e._UZ(10,"br"),e.TgZ(11,"ion-item")(12,"div",31)(13,"label"),e._uU(14,"Return Date & Time:"),e.qZA(),e._UZ(15,"ion-input",33),e.qZA()(),e._UZ(16,"br"),e.TgZ(17,"ion-item")(18,"div",31)(19,"label"),e._uU(20,"Location/Address:"),e.qZA(),e._UZ(21,"ion-input",34),e.qZA()(),e.TgZ(22,"ion-item")(23,"div",31)(24,"label"),e._uU(25,"County:"),e.qZA(),e._UZ(26,"ion-input",35),e.qZA()(),e.TgZ(27,"ion-item")(28,"div",31)(29,"label"),e._uU(30,"Emergency Contact:"),e.qZA(),e._UZ(31,"ion-input",36),e.qZA()(),e.TgZ(32,"ion-item")(33,"div",31)(34,"label"),e._uU(35,"Emergency Contact Phone:"),e.qZA(),e._UZ(36,"ion-input",37),e.qZA()(),e.TgZ(37,"ion-select",38)(38,"ion-select-option",39),e._uU(39,"Yes"),e.qZA(),e.TgZ(40,"ion-select-option",40),e._uU(41,"No"),e.qZA(),e.TgZ(42,"ion-select-option",41),e._uU(43,"N/A"),e.qZA()(),e.TgZ(44,"ion-select",42)(45,"ion-select-option",39),e._uU(46,"Yes"),e.qZA(),e.TgZ(47,"ion-select-option",40),e._uU(48,"No"),e.qZA(),e.TgZ(49,"ion-select-option",41),e._uU(50,"N/A"),e.qZA()(),e.TgZ(51,"ion-select",43)(52,"ion-select-option",39),e._uU(53,"Yes"),e.qZA(),e.TgZ(54,"ion-select-option",40),e._uU(55,"No"),e.qZA(),e.TgZ(56,"ion-select-option",41),e._uU(57,"N/A"),e.qZA()(),e.TgZ(58,"ion-select",44)(59,"ion-select-option",39),e._uU(60,"Yes"),e.qZA(),e.TgZ(61,"ion-select-option",40),e._uU(62,"No"),e.qZA(),e.TgZ(63,"ion-select-option",41),e._uU(64,"N/A"),e.qZA()(),e.TgZ(65,"ion-item"),e._UZ(66,"ion-textarea",45),e.qZA()()())}function se(o,l){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const a=e.oxw();e.xp6(),e.hij("Record Number: ",a.NewObservationRecordId,"")}}function s(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"div",24),e.NdJ("click",function(){e.CHM(a);const r=e.oxw();return e.KtG(r.reportForm.valid&&r.insertObservationReport())}),e._uU(1," Add Observation Report "),e._UZ(2,"ion-ripple-effect"),e.qZA()}if(2&o){const a=e.oxw();e.ekj("disabled-button",!a.reportForm.valid)}}function t(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"div",24),e.NdJ("click",function(){e.CHM(a);const r=e.oxw();return e.KtG(r.resetForm())}),e._uU(1," Reset Form "),e._UZ(2,"ion-ripple-effect"),e.qZA()}}const c=[{path:"",component:(()=>{var o;class l{constructor(n,r,u,m,_,O){this.router=n,this.location=r,this.quickbaseService=u,this.formBuilder=m,this.dialog=_,this.photoStorageService=O,this.photoCaptured=new e.vpe,this.apiKey=ne.N.apiKey,this.NewObservationRecordId=0,this.showRipple=!1,this.capturedPhoto="",this.savedPhotoPath="",this.photoDataUrl="",this.isLoading=!1,this.options=[],this.dropdownChoices=[],this.reportForm=this.formBuilder.group({observationType:["",y.kI.required],observationTone:["",y.kI.required],observationClass:["",y.kI.required],observationDescription:["",y.kI.required],DepartureDateTime:[""],ReturnDateTime:[""],LocationAddress:[""],County:[""],EmergencyContactName:[""],EmergencyContactPhone:[""],ccoApproved:[""],sotpApproved:[""],safetyPlan:[""],attendMeeting:[""],ReasonForRequest:[""]})}savePhoto(){var n=this;return(0,S.Z)(function*(){try{if(!n.capturedPhoto)return Promise.resolve(null);const r=n.capturedPhoto.split(",")[1],u=(new Date).getTime()+".jpeg";return yield k.writeFile({path:u,data:r,directory:M.tP.Data}),n.savedPhotoPath=u,{filepath:u,webviewPath:n.capturedPhoto}}catch(r){return Promise.reject(r)}})()}onObservationTypeChange(n){this.showRipple="Dirty UA"===n.name}openSelectPhotoDialog(){const n=this.dialog.open(G,{width:"400px",height:"600px"});n.componentInstance.photoCaptured.subscribe(r=>{this.capturedPhoto=r,this.savePhoto(),n.close()})}addObservationReport(){this.router.navigate(["/home/observation-report"])}insertObservationReport(){var n=this;return(0,S.Z)(function*(){n.isLoading=!0;const u={194:{value:n.residentData.recordNumber2.value},7:{value:n.reportForm.value.observationType},51:{value:n.reportForm.value.observationTone},94:{value:n.reportForm.value.observationClass},8:{value:n.reportForm.value.observationDescription},119:{value:n.reportForm.value.DepartureDateTime},120:{value:n.reportForm.value.ReturnDateTime},121:{value:n.reportForm.value.LocationAddress},131:{value:n.reportForm.value.County},122:{value:n.reportForm.value.EmergencyContactName},123:{value:n.reportForm.value.EmergencyContactPhone},124:{value:n.reportForm.value.ccoApproved},125:{value:n.reportForm.value.sotpApproved},126:{value:n.reportForm.value.safetyPlan},127:{value:n.reportForm.value.ReasonForRequest},128:{value:n.reportForm.value.attendMeeting}};n.capturedPhoto&&(u[59]={value:{fileName:"dirtyUA.png",data:n.capturedPhoto.split(",")[1]}}),n.quickbaseService.observationreport(u).subscribe(function(){var m=(0,S.Z)(function*(_){n.NewObservationRecordId=_.data[0][3].value,n.isLoading=!1});return function(_){return m.apply(this,arguments)}}(),m=>{})})()}resetForm(){this.reportForm.reset(),this.NewObservationRecordId=0}goBack(){this.location.back()}ngOnInit(){const n=this.reportForm.get("observationType");n&&(n.valueChanges.subscribe(r=>{this.onObservationTypeChange(r)}),this.fetchDropdownChoices())}fetchDropdownChoices(){this.quickbaseService.getDropdownChoices().subscribe({next:r=>{if(r&&Array.isArray(r)){const u=r.find(m=>7===m.id);u&&u.properties&&u.properties.choices&&(this.dropdownChoices=u.properties.choices)}},error:r=>{},complete:()=>{}});const n=this.router.getCurrentNavigation();n&&n.extras.state&&(this.residentData=n.extras.state.residentData,this.residentData&&(this.residentPhoto=this.photoStorageService.getPhoto(this.residentData.recordNumber2.value)))}}return(o=l).\u0275fac=function(n){return new(n||o)(e.Y36(F.F0),e.Y36(f.Ye),e.Y36(re.x),e.Y36(y.qu),e.Y36(v.uw),e.Y36(I.F))},o.\u0275cmp=e.Xpm({type:o,selectors:[["HOMMA-observationreport"]],inputs:{photo:"photo"},outputs:{photoCaptured:"photoCaptured"},decls:56,vars:15,consts:[[3,"translucent"],["color","Primary"],[3,"fullscreen"],[1,"ion-text-center"],["src","assets/logo/HOM3.png","alt","Logo"],[4,"ngIf"],[3,"formGroup"],["formControlName","observationType","label","Observation Type","interface","action-sheet","placeholder","Select the observation type","cancelText","Cancel Choice","label-placement","floating","fill","outline"],[3,"value",4,"ngFor","ngForOf"],[1,"error-message-text"],["formControlName","observationTone","label","Observation Tone","interface","action-sheet","placeholder","What is the particapant's emotion","label-placement","floating","fill","outline"],["value","Humble"],["value","Hostile"],["value","No Emotion"],["formControlName","observationClass","label","Observation Class","interface","action-sheet","placeholder","Is the observation positive, negative, or neutral?","label-placement","floating","fill","outline"],["value","Positive"],["value","Negative"],["value","Neutral"],["class","center-div",4,"ngIf"],["formControlName","observationDescription","label","Observation Description","labelPlacement","floating","placeholder","Please enter full details of the observation here","value","","autoGrow","true",1,"bordered-input"],["scrollable-content",""],[1,"wrapper"],["class","ion-activatable ripple-parent rounded-rectangle ripple-effect-blue",3,"disabled-button","click",4,"ngIf"],["class","ion-activatable ripple-parent rounded-rectangle ripple-effect-blue",3,"click",4,"ngIf"],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-blue",3,"click"],["alt","Resident Photo","class","thumbnail",3,"src",4,"ngIf"],["alt","Resident Photo",1,"thumbnail",3,"src"],[3,"value"],[1,"center-div"],[3,"click"],["alt","Captured Photo placeholder",3,"src"],[1,"stacked-label"],["type","datetime-local","formControlName","DepartureDateTime"],["type","datetime-local","formControlName","ReturnDateTime"],["type","text","formControlName","LocationAddress","placeholder","Enter Location/Address"],["type","text","formControlName","County","placeholder","Enter County"],["type","text","formControlName","EmergencyContactName","placeholder","Enter Emergency Contact Name"],["type","text","formControlName","EmergencyContactPhone","placeholder","Enter Emergency Contact Phone"],["formControlName","ccoApproved","label","CCO Approved?","interface","action-sheet","placeholder","Select option for CCO Approval","label-placement","floating","fill","outline"],["value","Yes"],["value","No"],["value","N/A"],["formControlName","sotpApproved","label","SOTP Therapist Approved?","interface","action-sheet","placeholder","Select option for SOTP Therapist Approval","label-placement","floating","fill","outline"],["formControlName","safetyPlan","label","Safety Plan Required?","interface","action-sheet","placeholder","Select option if a safety plan is required","label-placement","floating","fill","outline"],["formControlName","attendMeeting","label","Attend Required Meeting?","interface","action-sheet","placeholder","Select option if a attending the meeting is required","label-placement","floating","fill","outline"],["formControlName","ReasonForRequest","label","Reason For Request","labelPlacement","floating","placeholder","Please enter reason for the overnight request here","value","","autoGrow","true",1,"bordered-input"]],template:function(n,r){if(1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e._uU(3," HOM Mobile Assistant - Add Observation Report "),e.qZA()()(),e.TgZ(4,"ion-content",2)(5,"ion-card",3),e._UZ(6,"img",4),e.TgZ(7,"ion-card-header"),e._uU(8," Add an Observation Report for: "),e.TgZ(9,"ion-card-subtitle"),e._UZ(10,"br"),e.YNc(11,j,4,2,"div",5),e.qZA()()(),e.TgZ(12,"ion-card")(13,"ion-list",6)(14,"ion-select",7),e.YNc(15,H,2,2,"ion-select-option",8),e.qZA(),e.TgZ(16,"div",9),e.YNc(17,W,2,0,"div",5),e.qZA(),e.TgZ(18,"ion-select",10)(19,"ion-select-option",11),e._uU(20,"Humble"),e.qZA(),e.TgZ(21,"ion-select-option",12),e._uU(22,"Hostile"),e.qZA(),e.TgZ(23,"ion-select-option",13),e._uU(24,"No emotion"),e.qZA()(),e.TgZ(25,"div",9),e.YNc(26,ae,2,0,"div",5),e.qZA(),e.TgZ(27,"ion-select",14)(28,"ion-select-option",15),e._uU(29,"Positive"),e.qZA(),e.TgZ(30,"ion-select-option",16),e._uU(31,"Negative"),e.qZA(),e.TgZ(32,"ion-select-option",17),e._uU(33,"Neutral"),e.qZA()(),e.TgZ(34,"div",9),e.YNc(35,Q,2,0,"div",5),e.qZA(),e._UZ(36,"br"),e.YNc(37,B,3,0,"div",18),e._UZ(38,"br"),e.YNc(39,z,3,1,"div",18),e.TgZ(40,"ion-list")(41,"ion-item"),e._UZ(42,"ion-textarea",19),e.qZA(),e.TgZ(43,"div",9),e.YNc(44,$,2,0,"div",5),e.qZA(),e.YNc(45,K,67,0,"ion-card",5),e.TgZ(46,"ion-card")(47,"ion-card-content",20)(48,"div",21),e.YNc(49,se,2,1,"p",5)(50,s,3,2,"div",22)(51,t,3,0,"div",23),e._UZ(52,"br"),e.TgZ(53,"div",24),e.NdJ("click",function(){return r.goBack()}),e._uU(54," Back/Start Over "),e._UZ(55,"ion-ripple-effect"),e.qZA()()()()()()()()),2&n){let u,m;e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("ngIf",r.residentData),e.xp6(2),e.Q6J("formGroup",r.reportForm),e.xp6(2),e.Q6J("ngForOf",r.dropdownChoices),e.xp6(2),e.Q6J("ngIf",(null==r.reportForm.controls.observationType?null:r.reportForm.controls.observationType.invalid)&&r.reportForm.controls.observationType.touched),e.xp6(9),e.Q6J("ngIf",(null==r.reportForm.controls.observationTone?null:r.reportForm.controls.observationTone.invalid)&&r.reportForm.controls.observationTone.touched),e.xp6(9),e.Q6J("ngIf",(null==r.reportForm.controls.observationClass?null:r.reportForm.controls.observationClass.invalid)&&r.reportForm.controls.observationClass.touched),e.xp6(2),e.Q6J("ngIf","Dirty UA"===(null==(u=r.reportForm.get("observationType"))?null:u.value)),e.xp6(2),e.Q6J("ngIf",r.capturedPhoto),e.xp6(5),e.Q6J("ngIf",(null==r.reportForm.controls.observationDescription?null:r.reportForm.controls.observationDescription.invalid)&&r.reportForm.controls.observationDescription.touched),e.xp6(),e.Q6J("ngIf","Overnight Request"===(null==(m=r.reportForm.get("observationType"))?null:m.value)),e.xp6(4),e.Q6J("ngIf",r.NewObservationRecordId),e.xp6(),e.Q6J("ngIf",!r.NewObservationRecordId),e.xp6(),e.Q6J("ngIf",r.NewObservationRecordId)}},dependencies:[f.sg,f.O5,y.JJ,y.JL,p.YG,p.PM,p.FN,p.Zi,p.tO,p.Dq,p.W2,p.Gu,p.pK,p.Ie,p.q_,p.H$,p.t9,p.n0,p.g2,p.wd,p.sr,p.QI,p.j9,y.sg,y.u],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color: #4194ab !important;--ion-color-base: #fff !important}ion-title[_ngcontent-%COMP%]{--ion-color-base: #fff !important;font-size:16px}ion-card-header[_ngcontent-%COMP%]{--padding-bottom: 0;font-size:16px;font-weight:700}.thumbnail[_ngcontent-%COMP%]{width:100px;height:130px;object-fit:cover}ion-card-subtitle[_ngcontent-%COMP%]{--ion-color-base: #000 !important;font-size:12px;font-weight:inherit}ion-card-title[_ngcontent-%COMP%]{text-align:left}.error-message[_ngcontent-%COMP%]{color:red;font-size:20px;margin-top:10px}ion-card[_ngcontent-%COMP%]{justify-content:center}ion-card[_ngcontent-%COMP%]   .error-message-text[_ngcontent-%COMP%]{text-align:center;color:#87130a}ion-select[_ngcontent-%COMP%]{margin:0;padding:10px}form[_ngcontent-%COMP%]{margin:0;padding:10px}.ripple-effect-blue[_ngcontent-%COMP%]{color:#010384}.ripple-effect-lightblue[_ngcontent-%COMP%]{color:#00c8ff}.ripple-effect-orange[_ngcontent-%COMP%]{color:#6c5105;font-size:x-small}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;text-align:center;height:100px;width:200px;margin:0 auto}b[_ngcontent-%COMP%]{width:100%}.center-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%}.ripple-parent[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;border:1px solid #4194ab;width:100%;height:50px;border-radius:8px}.rounded-rectangle[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}.bordered-input[_ngcontent-%COMP%]{border:1px solid #4194ab;white-space:pre-wrap}.stacked-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#4194ab}ion-button[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 0px;--padding-bottom: 0px;--background: #87130a;--color: #fff;--border-radius: 8px;font-size:12px;font-weight:700}"]}),l})()}];let d=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,y.u5,p.Pc,y.UX,v.Is,F.Bz.forChild(c)]}),l})()}}]);