"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8372],{6400:(ne,x,f)=>{f.d(x,{C_:()=>T,io:()=>H,w8:()=>N});var u=f(1528);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var I=function(l){return l.Unimplemented="UNIMPLEMENTED",l.Unavailable="UNAVAILABLE",l}(I||{});class S extends Error{constructor(n,o,s){super(n),this.message=n,this.code=o,this.data=s}}const K=l=>{var n,o,s,a,t;const r=l.CapacitorCustomPlatform||null,i=l.Capacitor||{},c=i.Plugins=i.Plugins||{},d=l.CapacitorPlatforms,R=(null===(n=null==d?void 0:d.currentPlatform)||void 0===n?void 0:n.getPlatform)||(()=>null!==r?r.name:(l=>{var n,o;return null!=l&&l.androidBridge?"android":null!==(o=null===(n=null==l?void 0:l.webkit)||void 0===n?void 0:n.messageHandlers)&&void 0!==o&&o.bridge?"ios":"web"})(l)),M=(null===(o=null==d?void 0:d.currentPlatform)||void 0===o?void 0:o.isNativePlatform)||(()=>"web"!==R()),U=(null===(s=null==d?void 0:d.currentPlatform)||void 0===s?void 0:s.isPluginAvailable)||(v=>{const h=ee.get(v);return!!(null!=h&&h.platforms.has(R())||ce(v))}),ce=(null===(a=null==d?void 0:d.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(v=>{var h;return null===(h=i.PluginHeaders)||void 0===h?void 0:h.find(G=>G.name===v)}),ee=new Map,ge=(null===(t=null==d?void 0:d.currentPlatform)||void 0===t?void 0:t.registerPlugin)||((v,h={})=>{const G=ee.get(v);if(G)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),G.proxy;const $=R(),L=ce(v);let _;const be=function(){var g=(0,u.c)(function*(){return!_&&$ in h?_=_="function"==typeof h[$]?yield h[$]():h[$]:null!==r&&!_&&"web"in h&&(_=_="function"==typeof h.web?yield h.web():h.web),_});return function(){return g.apply(this,arguments)}}(),te=g=>{let b;const O=(...E)=>{const k=be().then(y=>{const Y=((g,b)=>{var O,E;if(!L){if(g)return null===(E=g[b])||void 0===E?void 0:E.bind(g);throw new S(`"${v}" plugin is not implemented on ${$}`,I.Unimplemented)}{const k=null==L?void 0:L.methods.find(y=>b===y.name);if(k)return"promise"===k.rtype?y=>i.nativePromise(v,b.toString(),y):(y,Y)=>i.nativeCallback(v,b.toString(),y,Y);if(g)return null===(O=g[b])||void 0===O?void 0:O.bind(g)}})(y,g);if(Y){const W=Y(...E);return b=null==W?void 0:W.remove,W}throw new S(`"${v}.${g}()" is not implemented on ${$}`,I.Unimplemented)});return"addListener"===g&&(k.remove=(0,u.c)(function*(){return b()})),k};return O.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:g,writable:!1,configurable:!1}),O},de=te("addListener"),ue=te("removeListener"),Pe=(g,b)=>{const O=de({eventName:g},b),E=function(){var y=(0,u.c)(function*(){const Y=yield O;ue({eventName:g,callbackId:Y},b)});return function(){return y.apply(this,arguments)}}(),k=new Promise(y=>O.then(()=>y({remove:E})));return k.remove=(0,u.c)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield E()}),k},oe=new Proxy({},{get(g,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?Pe:de;case"removeListener":return ue;default:return te(b)}}});return c[v]=oe,ee.set(v,{name:v,proxy:oe,platforms:new Set([...Object.keys(h),...L?[$]:[]])}),oe});return i.convertFileSrc||(i.convertFileSrc=v=>v),i.getPlatform=R,i.handleError=v=>l.console.error(v),i.isNativePlatform=M,i.isPluginAvailable=U,i.pluginMethodNoop=(v,h,G)=>Promise.reject(`${G} does not have an implementation of "${h}".`),i.registerPlugin=ge,i.Exception=S,i.DEBUG=!!i.DEBUG,i.isLoggingEnabled=!!i.isLoggingEnabled,i.platform=i.getPlatform(),i.isNative=i.isNativePlatform(),i},w=(l=>l.Capacitor=K(l))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),T=w.registerPlugin;class N{constructor(n){this.listeners={},this.windowListeners={},n&&(console.warn(`Capacitor WebPlugin "${n.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=n)}addListener(n,o){var s=this;this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(o);const t=this.windowListeners[n];t&&!t.registered&&this.addWindowListener(t);const r=function(){var c=(0,u.c)(function*(){return s.removeListener(n,o)});return function(){return c.apply(this,arguments)}}(),i=Promise.resolve({remove:r});return Object.defineProperty(i,"remove",{value:(c=(0,u.c)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield r()}),function(){return c.apply(this,arguments)})}),i;var c}removeAllListeners(){var n=this;return(0,u.c)(function*(){n.listeners={};for(const o in n.windowListeners)n.removeWindowListener(n.windowListeners[o]);n.windowListeners={}})()}notifyListeners(n,o){const s=this.listeners[n];s&&s.forEach(a=>a(o))}hasListeners(n){return!!this.listeners[n].length}registerWindowListener(n,o){this.windowListeners[o]={registered:!1,windowEventName:n,pluginEventName:o,handler:s=>{this.notifyListeners(o,s)}}}unimplemented(n="not implemented"){return new w.Exception(n,I.Unimplemented)}unavailable(n="not available"){return new w.Exception(n,I.Unavailable)}removeListener(n,o){var s=this;return(0,u.c)(function*(){const a=s.listeners[n];if(!a)return;const t=a.indexOf(o);s.listeners[n].splice(t,1),s.listeners[n].length||s.removeWindowListener(s.windowListeners[n])})()}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}}const j=l=>encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),q=l=>l.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Q extends N{getCookies(){return(0,u.c)(function*(){const n=document.cookie,o={};return n.split(";").forEach(s=>{if(s.length<=0)return;let[a,t]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=q(a).trim(),t=q(t).trim(),o[a]=t}),o})()}setCookie(n){return(0,u.c)(function*(){try{const o=j(n.key),s=j(n.value),a=`; expires=${(n.expires||"").replace("expires=","")}`,t=(n.path||"/").replace("path=",""),r=null!=n.url&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${o}=${s||""}${a}; path=${t}; ${r};`}catch(o){return Promise.reject(o)}})()}deleteCookie(n){return(0,u.c)(function*(){try{document.cookie=`${n.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}})()}clearCookies(){return(0,u.c)(function*(){try{const n=document.cookie.split(";")||[];for(const o of n)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(n){return Promise.reject(n)}})()}clearAllCookies(){var n=this;return(0,u.c)(function*(){try{yield n.clearCookies()}catch(o){return Promise.reject(o)}})()}}T("CapacitorCookies",{web:()=>new Q});const z=function(){var l=(0,u.c)(function*(n){return new Promise((o,s)=>{const a=new FileReader;a.onload=()=>{const t=a.result;o(t.indexOf(",")>=0?t.split(",")[1]:t)},a.onerror=t=>s(t),a.readAsDataURL(n)})});return function(o){return l.apply(this,arguments)}}(),H=(l,n={})=>{const o=Object.assign({method:l.method||"GET",headers:l.headers},n),a=((l={})=>{const n=Object.keys(l);return Object.keys(l).map(a=>a.toLocaleLowerCase()).reduce((a,t,r)=>(a[t]=l[n[r]],a),{})})(l.headers)["content-type"]||"";if("string"==typeof l.data)o.body=l.data;else if(a.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[r,i]of Object.entries(l.data||{}))t.set(r,i);o.body=t.toString()}else if(a.includes("multipart/form-data")||l.data instanceof FormData){const t=new FormData;if(l.data instanceof FormData)l.data.forEach((i,c)=>{t.append(c,i)});else for(const i of Object.keys(l.data))t.append(i,l.data[i]);o.body=t;const r=new Headers(o.headers);r.delete("content-type"),o.headers=r}else(a.includes("application/json")||"object"==typeof l.data)&&(o.body=JSON.stringify(l.data));return o};class X extends N{request(n){return(0,u.c)(function*(){const o=H(n,n.webFetchExtra),s=((l,n=!0)=>l?Object.entries(l).reduce((s,a)=>{const[t,r]=a;let i,c;return Array.isArray(r)?(c="",r.forEach(d=>{i=n?encodeURIComponent(d):d,c+=`${t}=${i}&`}),c.slice(0,-1)):(i=n?encodeURIComponent(r):r,c=`${t}=${i}`),`${s}&${c}`},"").substr(1):null)(n.params,n.shouldEncodeUrlParams),a=s?`${n.url}?${s}`:n.url,t=yield fetch(a,o),r=t.headers.get("content-type")||"";let c,d,{responseType:i="text"}=t.ok?n:{};switch(r.includes("application/json")&&(i="json"),i){case"arraybuffer":case"blob":d=yield t.blob(),c=yield z(d);break;case"json":c=yield t.json();break;default:c=yield t.text()}const P={};return t.headers.forEach((R,A)=>{P[A]=R}),{data:c,headers:P,status:t.status,url:t.url}})()}get(n){var o=this;return(0,u.c)(function*(){return o.request(Object.assign(Object.assign({},n),{method:"GET"}))})()}post(n){var o=this;return(0,u.c)(function*(){return o.request(Object.assign(Object.assign({},n),{method:"POST"}))})()}put(n){var o=this;return(0,u.c)(function*(){return o.request(Object.assign(Object.assign({},n),{method:"PUT"}))})()}patch(n){var o=this;return(0,u.c)(function*(){return o.request(Object.assign(Object.assign({},n),{method:"PATCH"}))})()}delete(n){var o=this;return(0,u.c)(function*(){return o.request(Object.assign(Object.assign({},n),{method:"DELETE"}))})()}}T("CapacitorHttp",{web:()=>new X})},5404:(ne,x,f)=>{f.d(x,{Gq:()=>p,Y9:()=>u});var u=function(m){return m.Documents="DOCUMENTS",m.Data="DATA",m.Library="LIBRARY",m.Cache="CACHE",m.External="EXTERNAL",m.ExternalStorage="EXTERNAL_STORAGE",m}(u||{}),p=function(m){return m.UTF8="utf8",m.ASCII="ascii",m.UTF16="utf16",m}(p||{})},8372:(ne,x,f)=>{f.r(x),f.d(x,{ObservationReportPageModule:()=>n});var u=f(1368),p=f(2112),C=f(4716),D=f(4180),m=f(5768),F=f(1528),e=f(4496);const I=["videoElement"],S=["canvasElement"],B=["imageElement"];let K=(()=>{var o;class s{constructor(t,r){this.dialogRef=t,this.data=r,this.photoCaptured=new e._w7}ngOnInit(){}onTakePhoto(){this.capturePhoto(),navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}}}).catch(()=>navigator.mediaDevices.getUserMedia({video:!0})).then(t=>{this.stream=t,this.videoElement.nativeElement.srcObject=t}).catch(t=>{console.error("Error accessing camera: ",t)})}capturePhoto(){const t=this.canvasElement.nativeElement,r=t.getContext("2d");t.width=100,t.height=75,r.drawImage(this.videoElement.nativeElement,0,0,t.width,t.height);const d=t.toDataURL("image/png");window.plugins.socialsharing.share(null,null,d,null),this.imageElement.nativeElement.src=d,this.photoCaptured.emit(d),this.stream&&this.stream.getTracks().forEach(P=>P.stop())}onSelectPhoto(){this.dialogRef.close()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.GI1(m.yI),e.GI1(m.sR))},o.\u0275cmp=e.In1({type:o,selectors:[["app-select-photo-dialog"]],viewQuery:function(t,r){if(1&t&&(e.CC$(I,5),e.CC$(S,5),e.CC$(B,5)),2&t){let i;e.wto(i=e.Gqi())&&(r.videoElement=i.first),e.wto(i=e.Gqi())&&(r.canvasElement=i.first),e.wto(i=e.Gqi())&&(r.imageElement=i.first)}},outputs:{photoCaptured:"photoCaptured"},decls:23,vars:1,consts:[[3,"translucent"],["color","Primary"],["mat-dialog-title",""],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-green",3,"click"],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-yellow",3,"click"],["autoplay",""],["videoElement",""],[2,"display","none"],["canvasElement",""],[3,"click"],["alt","UA photo","title","Photo of UA specimen"],["imageElement",""]],template:function(t,r){1&t&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e.OEk(3," HOM Mobile Assistant - Take Photo of UA Specimen "),e.C$Y()()(),e.I0R(4,"h2",2),e.OEk(5,"Select a photo"),e.C$Y(),e.I0R(6,"mat-dialog-content")(7,"p"),e.OEk(8,"Would you like to take a new photo or select a photo from the gallery?"),e.C$Y()(),e.I0R(9,"mat-dialog-actions")(10,"div",3),e.qCj("click",function(){return r.onTakePhoto()}),e.OEk(11," Take Photo "),e.C$Y(),e.I0R(12,"div",4),e.qCj("click",function(){return r.onSelectPhoto()}),e.OEk(13," Select Photo "),e.C$Y()(),e.I0R(14,"p"),e.wR5(15,"video",5,6)(17,"canvas",7,8),e.C$Y(),e.I0R(19,"ion-button",9),e.qCj("click",function(){return r.capturePhoto()}),e.OEk(20,"Snap Photo"),e.C$Y(),e.wR5(21,"img",10,11)),2&t&&e.E7m("translucent",!0)},dependencies:[p.sn,p.wB,p.tM,p.Md,m.WQ,m.Yp,m.iU],styles:[".ripple-effect-green[_ngcontent-%COMP%]{color:#09bc0c98}.ripple-effect-yellow[_ngcontent-%COMP%]{color:#cf0}.ripple-effect-orange[_ngcontent-%COMP%]{color:#fb0}video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;text-align:center;height:100px;width:200px;margin:0 auto}b[_ngcontent-%COMP%]{width:100%}.ripple-parent[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;border:1px solid #4194ab;width:100%;height:50px;border-radius:8px}.rounded-rectangle[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}"]}),s})();var re=f(6400),w=f(5404);const T=(0,re.C_)("Filesystem",{web:()=>f.e(7688).then(f.bind(f,7688)).then(o=>new o.FilesystemWeb)});var ie=f(6716),ae=f(4628);function N(o,s){if(1&o&&(e.I0R(0,"ion-select-option",25),e.OEk(1),e.C$Y()),2&o){const a=s.$implicit;e.E7m("value",a.id),e.yG2(),e.cNF(a)}}function se(o,s){1&o&&(e.I0R(0,"div"),e.OEk(1," Invalid input: Please select an observation type "),e.C$Y())}function j(o,s){1&o&&(e.I0R(0,"div"),e.OEk(1," Invalid input: Please select an observation tone "),e.C$Y())}function q(o,s){1&o&&(e.I0R(0,"div"),e.OEk(1," Invalid input: Please select an observation class\n"),e.C$Y())}function Q(o,s){if(1&o){const a=e.KQA();e.I0R(0,"div",26)(1,"ion-button",27),e.qCj("click",function(){e.usT(a);const r=e.GaO();return e.CGJ(r.openSelectPhotoDialog())}),e.OEk(2," Click to take/select photo of UA specimen\n"),e.C$Y()()}}function le(o,s){if(1&o){const a=e.KQA();e.I0R(0,"div"),e.wR5(1,"img",28)(2,"br"),e.I0R(3,"ion-button",29),e.qCj("click",function(){e.usT(a);const r=e.GaO();return e.CGJ(r.savePhoto())}),e.OEk(4,"Save Photo"),e.C$Y(),e.wR5(5,"br"),e.I0R(6,"ion-button",29),e.qCj("click",function(){e.usT(a);const r=e.GaO();return e.CGJ(r.getPhoto(r.savedPhotoPath))}),e.OEk(7,"View Photo"),e.C$Y(),e.wR5(8,"br")(9,"img",30)(10,"br"),e.I0R(11,"ion-button",29),e.qCj("click",function(){e.usT(a);const r=e.GaO();return e.CGJ(r.sharePhoto())}),e.OEk(12,"Share Photo"),e.C$Y(),e.wR5(13,"br"),e.C$Y()}if(2&o){const a=e.GaO();e.yG2(),e.E7m("src",a.capturedPhoto,e.K6U),e.yG2(2),e.E7m("disabled",!a.capturedPhoto),e.yG2(3),e.E7m("disabled",!a.capturedPhoto),e.yG2(3),e.E7m("src",a.photoDataUrl,e.K6U),e.yG2(2),e.E7m("disabled",!a.capturedPhoto)}}function z(o,s){1&o&&(e.I0R(0,"div"),e.OEk(1," Invalid input: Please enter a detailed description "),e.C$Y())}function J(o,s){1&o&&(e.I0R(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.OEk(3,"Overnight Request"),e.C$Y()(),e.I0R(4,"ion-list")(5,"ion-item")(6,"div",31)(7,"label"),e.OEk(8,"Departure Date & Time"),e.C$Y(),e.wR5(9,"ion-input",32),e.C$Y()(),e.wR5(10,"br"),e.I0R(11,"ion-item")(12,"div",31)(13,"label"),e.OEk(14,"Return Date & Time:"),e.C$Y(),e.wR5(15,"ion-input",33),e.C$Y()(),e.wR5(16,"br"),e.I0R(17,"ion-item")(18,"div",31)(19,"label"),e.OEk(20,"Location/Address:"),e.C$Y(),e.wR5(21,"ion-input",34),e.C$Y()(),e.I0R(22,"ion-item")(23,"div",31)(24,"label"),e.OEk(25,"County:"),e.C$Y(),e.wR5(26,"ion-input",35),e.C$Y()(),e.I0R(27,"ion-item")(28,"div",31)(29,"label"),e.OEk(30,"Emergency Contact:"),e.C$Y(),e.wR5(31,"ion-input",36),e.C$Y()(),e.I0R(32,"ion-item")(33,"div",31)(34,"label"),e.OEk(35,"Emergency Contact Phone:"),e.C$Y(),e.wR5(36,"ion-input",37),e.C$Y()(),e.I0R(37,"ion-select",38)(38,"ion-select-option",39),e.OEk(39,"Yes"),e.C$Y(),e.I0R(40,"ion-select-option",40),e.OEk(41,"No"),e.C$Y(),e.I0R(42,"ion-select-option",41),e.OEk(43,"N/A"),e.C$Y()(),e.I0R(44,"ion-select",42)(45,"ion-select-option",39),e.OEk(46,"Yes"),e.C$Y(),e.I0R(47,"ion-select-option",40),e.OEk(48,"No"),e.C$Y(),e.I0R(49,"ion-select-option",41),e.OEk(50,"N/A"),e.C$Y()(),e.I0R(51,"ion-select",43)(52,"ion-select-option",39),e.OEk(53,"Yes"),e.C$Y(),e.I0R(54,"ion-select-option",40),e.OEk(55,"No"),e.C$Y(),e.I0R(56,"ion-select-option",41),e.OEk(57,"N/A"),e.C$Y()(),e.I0R(58,"ion-select",44)(59,"ion-select-option",39),e.OEk(60,"Yes"),e.C$Y(),e.I0R(61,"ion-select-option",40),e.OEk(62,"No"),e.C$Y(),e.I0R(63,"ion-select-option",41),e.OEk(64,"N/A"),e.C$Y()(),e.I0R(65,"ion-item"),e.wR5(66,"ion-textarea",45),e.C$Y()()())}function V(o,s){if(1&o&&(e.I0R(0,"p"),e.OEk(1),e.C$Y()),2&o){const a=e.GaO();e.yG2(),e.oRS("Record Number: ",a.NewObservationRecordId,"")}}function H(o,s){if(1&o){const a=e.KQA();e.I0R(0,"div",24),e.qCj("click",function(){e.usT(a);const r=e.GaO();return e.CGJ(r.reportForm.valid&&r.insertObservationReport())}),e.OEk(1," Add Observation Report "),e.wR5(2,"ion-ripple-effect"),e.C$Y()}if(2&o){const a=e.GaO();e.eAK("disabled-button",!a.reportForm.valid)}}function X(o,s){if(1&o){const a=e.KQA();e.I0R(0,"div",24),e.qCj("click",function(){e.usT(a);const r=e.GaO();return e.CGJ(r.resetForm())}),e.OEk(1," Reset Form "),e.wR5(2,"ion-ripple-effect"),e.C$Y()}}const l=[{path:"",component:(()=>{var o;class s{constructor(t,r,i,c,d){this.router=t,this.location=r,this.quickbaseService=i,this.formBuilder=c,this.dialog=d,this.photoCaptured=new e._w7,this.apiKey=ie.O.apiKey,this.NewObservationRecordId=0,this.showRipple=!1,this.capturedPhoto="",this.savedPhotoPath="",this.photoDataUrl="",this.isLoading=!1,this.reportForm=this.formBuilder.group({observationType:["",C.AQ.required],observationTone:["",C.AQ.required],observationClass:["",C.AQ.required],observationDescription:["",C.AQ.required],DepartureDateTime:[""],ReturnDateTime:[""],LocationAddress:[""],County:[""],EmergencyContactName:[""],EmergencyContactPhone:[""],ccoApproved:[""],sotpApproved:[""],safetyPlan:[""],attendMeeting:[""],ReasonForRequest:[""]})}savePhoto(){var t=this;return(0,F.c)(function*(){try{if(!t.capturedPhoto)return console.error("No photo to save"),Promise.resolve(null);const r=t.capturedPhoto.split(",")[1],i=(new Date).getTime()+".jpeg";return yield T.writeFile({path:i,data:r,directory:w.Y9.Data}),t.savedPhotoPath=i,console.log("Saved Photo Path:",t.savedPhotoPath),console.log("Saved Photo:",i),{filepath:i,webviewPath:t.capturedPhoto}}catch(r){return console.error("Failed to save photo to filesystem",r),Promise.reject(r)}})()}getPhoto(t){var r=this;return(0,F.c)(function*(){try{const i=yield T.readFile({path:r.savedPhotoPath,directory:w.Y9.Data});r.photoDataUrl="data:image/jpeg;base64,"+i.data,console.log("Photo Data URL:",r.photoDataUrl)}catch(i){return console.error("Failed to read photo from filesystem",i),Promise.reject(i)}})()}onObservationTypeChange(t){this.showRipple="Dirty UA"===t.name}sharePhoto(){var t=this;return(0,F.c)(function*(){try{const r=yield T.readFile({path:t.savedPhotoPath,directory:w.Y9.Data});t.photoDataUrl="data:image/jpeg;base64,"+r.data;const i=cordova.file.externalRootDirectory+"/DCIM/photo.jpg";cordova.plugins.FileTransfer.download(t.photoDataUrl,i,function(c){console.log("Download complete: "+c.toURL())},function(c){console.error("Download error: "+c.source)}),console.log("Photo saved to gallery:",i),window.plugins.socialsharing.share(null,null,t.photoDataUrl,null)}catch(r){console.error("Failed to read photo from filesystem",r)}})()}openSelectPhotoDialog(){const t=this.dialog.open(K,{width:"250px"});t.componentInstance.photoCaptured.subscribe(r=>{this.capturedPhoto=r,t.close()}),this.savePhoto()}addObservationReport(){this.router.navigate(["/home/observation-report"])}insertObservationReport(){var t=this;return(0,F.c)(function*(){t.isLoading=!0;const i={194:{value:t.residentData.recordNumber2.value},7:{value:t.reportForm.value.observationType},51:{value:t.reportForm.value.observationTone},94:{value:t.reportForm.value.observationClass},8:{value:t.reportForm.value.observationDescription},119:{value:t.reportForm.value.DepartureDateTime},120:{value:t.reportForm.value.ReturnDateTime},121:{value:t.reportForm.value.LocationAddress},131:{value:t.reportForm.value.County},122:{value:t.reportForm.value.EmergencyContactName},123:{value:t.reportForm.value.EmergencyContactPhone},124:{value:t.reportForm.value.ccoApproved},125:{value:t.reportForm.value.sotpApproved},126:{value:t.reportForm.value.safetyPlan},127:{value:t.reportForm.value.ReasonForRequest},128:{value:t.reportForm.value.attendMeeting}};console.log("Observation Report Body:",i),t.quickbaseService.observationreport(i).subscribe(function(){var c=(0,F.c)(function*(d){console.log("Observation Report inserted successfully",d),t.NewObservationRecordId=d.data[0][3].value,console.log("New Observation Record ID:",t.NewObservationRecordId),t.isLoading=!1;const R=yield(yield fetch(t.capturedPhoto)).blob(),A=new File([R],"dirtyUA.png",{type:R.type}),M=new FileReader;console.log("File:",A),M.onloadend=()=>{if("string"==typeof M.result){const Z=M.result.split(",")[1];t.quickbaseService.uploadFile(t.NewObservationRecordId.toString(),Z).subscribe(U=>{console.log("File uploaded successfully",U)},U=>{console.error("Error uploading file",U)})}},M.readAsDataURL(A)});return function(d){return c.apply(this,arguments)}}(),c=>{console.error("Error inserting record",c)})})()}resetForm(){this.reportForm.reset(),this.NewObservationRecordId=0}goBack(){this.location.back()}ngOnInit(){const t=this.reportForm.get("observationType");t&&t.valueChanges.subscribe(i=>{this.onObservationTypeChange(i)});const r=this.router.getCurrentNavigation();r&&r.extras.state&&(this.residentData=r.extras.state.residentData,console.log("Resident Data:",this.residentData)),this.quickbaseService.getDropdownChoices().subscribe(i=>{this.dropdownChoices=i.properties.choices,console.log("Dropdown Choices:",this.dropdownChoices)})}}return(o=s).\u0275fac=function(t){return new(t||o)(e.GI1(D.E5),e.GI1(u.oB),e.GI1(ae.i),e.GI1(C.im),e.GI1(m.qW))},o.\u0275cmp=e.In1({type:o,selectors:[["HOMMA-observationreport"]],inputs:{photo:"photo"},outputs:{photoCaptured:"photoCaptured"},decls:56,vars:16,consts:[[3,"translucent"],["color","Primary"],[3,"fullscreen"],[1,"ion-text-center"],["src","assets/logo/HOM.png","alt","Logo"],[3,"innerHTML"],[3,"formGroup"],["formControlName","observationType","label","Observation Type","interface","action-sheet","placeholder","Select the observation type","cancelText","Cancel Choice","label-placement","floating","fill","outline"],[3,"value",4,"ngFor","ngForOf"],[1,"error-message-text"],[4,"ngIf"],["formControlName","observationTone","label","Observation Tone","interface","action-sheet","placeholder","What is the particapant's emotion","label-placement","floating","fill","outline"],["value","Humble"],["value","Hostile"],["value","No Emotion"],["formControlName","observationClass","label","Observation Class","interface","action-sheet","placeholder","Is the observation positive, negative, or neutral?","label-placement","floating","fill","outline"],["value","Positive"],["value","Negative"],["value","Neutral"],["class","center-div",4,"ngIf"],["formControlName","observationDescription","label","Observation Description","labelPlacement","floating","placeholder","Please enter full details of the observation here","value","","autoGrow","true",1,"bordered-input"],[1,"wrapper"],["class","ion-activatable ripple-parent rounded-rectangle ripple-effect-blue",3,"disabled-button","click",4,"ngIf"],["class","ion-activatable ripple-parent rounded-rectangle ripple-effect-blue",3,"click",4,"ngIf"],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-blue",3,"click"],[3,"value"],[1,"center-div"],[3,"click"],["alt","Captured Photo placeholder",3,"src"],[3,"disabled","click"],["alt","Saved Photo placeholder",3,"src"],[1,"stacked-label"],["type","datetime-local","formControlName","DepartureDateTime"],["type","datetime-local","formControlName","ReturnDateTime"],["type","text","formControlName","LocationAddress","placeholder","Enter Location/Address"],["type","text","formControlName","County","placeholder","Enter County"],["type","text","formControlName","EmergencyContactName","placeholder","Enter Emergency Contact Name"],["type","text","formControlName","EmergencyContactPhone","placeholder","Enter Emergency Contact Phone"],["formControlName","ccoApproved","label","CCO Approved?","interface","action-sheet","placeholder","Select option for CCO Approval","label-placement","floating","fill","outline"],["value","Yes"],["value","No"],["value","N/A"],["formControlName","sotpApproved","label","SOTP Therapist Approved?","interface","action-sheet","placeholder","Select option for SOTP Therapist Approval","label-placement","floating","fill","outline"],["formControlName","safetyPlan","label","Safety Plan Required?","interface","action-sheet","placeholder","Select option if a safety plan is required","label-placement","floating","fill","outline"],["formControlName","attendMeeting","label","Attend Required Meeting?","interface","action-sheet","placeholder","Select option if a attending the meeting is required","label-placement","floating","fill","outline"],["formControlName","ReasonForRequest","label","Reason For Request","labelPlacement","floating","placeholder","Please enter reason for the overnight request here","value","","autoGrow","true",1,"bordered-input"]],template:function(t,r){if(1&t&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e.OEk(3," HOM Mobile Assistant - Add Observation Report "),e.C$Y()()(),e.I0R(4,"ion-content",2)(5,"ion-card",3),e.wR5(6,"img",4)(7,"br"),e.I0R(8,"ion-card-header"),e.OEk(9," Add an Observation Report for: "),e.I0R(10,"ion-card-subtitle"),e.wR5(11,"br")(12,"div",5),e.OEk(13),e.C$Y()()(),e.I0R(14,"ion-card")(15,"ion-list",6)(16,"ion-select",7),e.yuY(17,N,2,2,"ion-select-option",8),e.C$Y(),e.I0R(18,"div",9),e.yuY(19,se,2,0,"div",10),e.C$Y(),e.I0R(20,"ion-select",11)(21,"ion-select-option",12),e.OEk(22,"Humble"),e.C$Y(),e.I0R(23,"ion-select-option",13),e.OEk(24,"Hostile"),e.C$Y(),e.I0R(25,"ion-select-option",14),e.OEk(26,"No emotion"),e.C$Y()(),e.I0R(27,"div",9),e.yuY(28,j,2,0,"div",10),e.C$Y(),e.I0R(29,"ion-select",15)(30,"ion-select-option",16),e.OEk(31,"Positive"),e.C$Y(),e.I0R(32,"ion-select-option",17),e.OEk(33,"Negative"),e.C$Y(),e.I0R(34,"ion-select-option",18),e.OEk(35,"Neutral"),e.C$Y()(),e.I0R(36,"div",9),e.yuY(37,q,2,0,"div",10),e.C$Y(),e.wR5(38,"br"),e.yuY(39,Q,3,0,"div",19),e.wR5(40,"br"),e.yuY(41,le,14,5,"div",10),e.I0R(42,"ion-list")(43,"ion-item"),e.wR5(44,"ion-textarea",20),e.C$Y(),e.I0R(45,"div",9),e.yuY(46,z,2,0,"div",10),e.C$Y(),e.yuY(47,J,67,0,"ion-card",10),e.I0R(48,"div",21),e.yuY(49,V,2,1,"p",10)(50,H,3,2,"div",22)(51,X,3,0,"div",23),e.wR5(52,"br"),e.I0R(53,"div",24),e.qCj("click",function(){return r.goBack()}),e.OEk(54," Back/Start Over "),e.wR5(55,"ion-ripple-effect"),e.C$Y()()()()()()),2&t){let i,c;e.E7m("translucent",!0),e.yG2(4),e.E7m("fullscreen",!0),e.yG2(8),e.E7m("innerHTML",r.residentData.residentPhoto.value,e.E3n),e.yG2(),e.oRS(" ",r.residentData.residentFullName.value," "),e.yG2(2),e.E7m("formGroup",r.reportForm),e.yG2(2),e.E7m("ngForOf",r.dropdownChoices),e.yG2(2),e.E7m("ngIf",(null==r.reportForm.controls.observationType?null:r.reportForm.controls.observationType.invalid)&&r.reportForm.controls.observationType.touched),e.yG2(9),e.E7m("ngIf",(null==r.reportForm.controls.observationTone?null:r.reportForm.controls.observationTone.invalid)&&r.reportForm.controls.observationTone.touched),e.yG2(9),e.E7m("ngIf",(null==r.reportForm.controls.observationClass?null:r.reportForm.controls.observationClass.invalid)&&r.reportForm.controls.observationClass.touched),e.yG2(2),e.E7m("ngIf","Dirty UA"===(null==(i=r.reportForm.get("observationType"))?null:i.value)),e.yG2(2),e.E7m("ngIf",r.capturedPhoto),e.yG2(5),e.E7m("ngIf",(null==r.reportForm.controls.observationDescription?null:r.reportForm.controls.observationDescription.invalid)&&r.reportForm.controls.observationDescription.touched),e.yG2(),e.E7m("ngIf","Overnight Request"===(null==(c=r.reportForm.get("observationType"))?null:c.value)),e.yG2(2),e.E7m("ngIf",r.NewObservationRecordId),e.yG2(),e.E7m("ngIf",!r.NewObservationRecordId),e.yG2(),e.E7m("ngIf",r.NewObservationRecordId)}},dependencies:[u.ay,u.u_,C.ue,C.u,p.sn,p.KC,p.YY,p.MN,p.I7,p._i,p.wB,p.A5,p.Yb,p.OC,p.mA,p.Cy,p.gd,p.gP,p.tM,p.Md,p.IT,p.qG,C.uW,C.Wo],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color: #4194ab !important;--ion-color-base: #fff !important}ion-title[_ngcontent-%COMP%]{--ion-color-base: #fff !important;font-size:16px}ion-card-header[_ngcontent-%COMP%]{--padding-bottom: 0;font-size:16px;font-weight:700}ion-card-subtitle[_ngcontent-%COMP%]{--ion-color-base: #000 !important;font-size:12px;font-weight:inherit}ion-card-title[_ngcontent-%COMP%]{text-align:left}.error-message[_ngcontent-%COMP%]{color:red;font-size:20px;margin-top:10px}ion-card[_ngcontent-%COMP%]{justify-content:center}ion-card[_ngcontent-%COMP%]   .error-message-text[_ngcontent-%COMP%]{text-align:center;color:#87130a}ion-select[_ngcontent-%COMP%]{margin:0;padding:10px}form[_ngcontent-%COMP%]{margin:0;padding:10px}.ripple-effect-blue[_ngcontent-%COMP%]{color:#010384}.ripple-effect-lightblue[_ngcontent-%COMP%]{color:#00c8ff}.ripple-effect-orange[_ngcontent-%COMP%]{color:#6c5105;font-size:x-small}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;text-align:center;height:100px;width:200px;margin:0 auto}b[_ngcontent-%COMP%]{width:100%}.center-div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%}.ripple-parent[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;border:1px solid #4194ab;width:100%;height:50px;border-radius:8px}.rounded-rectangle[_ngcontent-%COMP%]{width:200px;height:40px;border-radius:8px}.bordered-input[_ngcontent-%COMP%]{border:1px solid #4194ab;white-space:pre-wrap}.stacked-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#4194ab}ion-button[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 0px;--padding-bottom: 0px;--background: #87130a;--color: #fff;--border-radius: 8px;font-size:12px;font-weight:700}"]}),s})()}];let n=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.a4G({type:o}),o.\u0275inj=e.s3X({imports:[u.MD,C.y,p.wZ,C.sl,m.sr,D.qQ.forChild(l)]}),s})()}}]);