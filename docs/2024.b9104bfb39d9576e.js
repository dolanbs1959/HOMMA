"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2024],{2024:(Y,b,u)=>{u.r(b),u.d(b,{WeeklyMeetingsPageModule:()=>S});var f=u(1368),c=u(4716),a=u(2112),v=u(4180),M=u(4704),k=u(7400),e=u(4496),C=u(4628);const P=["class","meetings"];function A(t,r){if(1&t&&(e.I0R(0,"form",14),e.wR5(1,"ion-textarea",15),e.C$Y()),2&t){const o=e.GaO();e.E7m("formGroup",o.formGroup)}}function x(t,r){if(1&t){const o=e.KQA();e.I0R(0,"ion-card")(1,"ion-card-content")(2,"p"),e.OEk(3),e.C$Y(),e.I0R(4,"ion-radio-group",17),e.iHE("ngModelChange",function(n){const d=e.usT(o).$implicit;return e.kNx(d.AttendanceStatus,n)||(d.AttendanceStatus=n),e.CGJ(n)}),e.I0R(5,"ion-radio",18),e.OEk(6,"Present"),e.C$Y(),e.wR5(7,"br"),e.I0R(8,"ion-radio",19),e.OEk(9,"Excused Absence"),e.C$Y(),e.wR5(10,"br"),e.I0R(11,"ion-radio",20),e.OEk(12,"Unexcused Absence"),e.C$Y(),e.wR5(13,"br"),e.I0R(14,"ion-radio",21),e.OEk(15,"Excused Tardy"),e.C$Y(),e.wR5(16,"br"),e.I0R(17,"ion-radio",22),e.OEk(18,"Unexcused Tardy"),e.C$Y(),e.wR5(19,"br"),e.C$Y(),e.I0R(20,"form",14)(21,"div",23)(22,"div",24),e.wR5(23,"ion-textarea",25),e.C$Y()()()()()}if(2&t){const o=r.$implicit,i=r.index,n=e.GaO(2);e.yG2(3),e.cNF(o.residentFullName.value),e.yG2(),e.OKB("ngModel",o.AttendanceStatus),e.yG2(16),e.E7m("formGroup",n.residentForm),e.yG2(2),e.E7m("formGroupName",i)}}function O(t,r){if(1&t&&(e.I0R(0,"div"),e.yuY(1,x,24,4,"ion-card",16),e.wVc(2,"async"),e.wR5(3,"router-outlet"),e.C$Y()),2&t){const o=e.GaO();e.yG2(),e.E7m("ngForOf",e.kDX(2,1,o.quickbaseService.residentData))}}function _(t,r){if(1&t){const o=e.KQA();e.I0R(0,"div",26),e.qCj("click",function(){e.usT(o);const n=e.GaO();return e.CGJ(n.addWeeklyHouseMeeting())}),e.OEk(1," Add New Activity "),e.wR5(2,"ion-ripple-effect"),e.C$Y()}}function I(t,r){if(1&t){const o=e.KQA();e.I0R(0,"div",26),e.qCj("click",function(){e.usT(o);const n=e.GaO();return e.CGJ(n.updateAttendanceRecords())}),e.OEk(1," Update Attendance Records "),e.wR5(2,"ion-ripple-effect"),e.C$Y()}}function R(t,r){if(1&t&&(e.I0R(0,"div",27),e.OEk(1),e.C$Y()),2&t){const o=e.GaO();e.yG2(),e.cNF(o.message)}}function G(t,r){1&t&&(e.I0R(0,"div",27),e.OEk(1,"Your attendance records have been successfully updated. If you'd like to make any changes, please access your account using the House Leader Portal."),e.C$Y())}const w=[{path:"",component:(()=>{var t;class r{get residentsArray(){return this.residentForm.get("residents")}constructor(i,n,s,d,g){this.quickbaseService=i,this.route=n,this.router=s,this.location=d,this.formBuilder=g,this.HouseLeaderName="",this.theHouseName="",this.HLphone="",this.residentFullName="",this.AttendanceStatus="",this.attendanceUpdated=!1,this.isActivityAdded=!1,this.allResidentsSelected=!1,this.isActivityAddedOnce=!1,this.activityId=0,this.message="",this.shouldInsertActivity=!1,this.quickbaseService.residentData.subscribe(l=>{this.residentData=l}),this.formGroup=new c.WC({Comments:new c.Ku(""),ActivityDesc:new c.Ku("")}),this.residentForm=this.formBuilder.group({residents:this.formBuilder.array([])})}addWeeklyHouseMeeting(){const i=this.quickbaseService.TaskRecordId,s={6:{value:this.formGroup.value.ActivityDesc},89:{value:(new Date).toISOString().split("T")[0]},43:{value:i}};console.log("Activity Body",s),(this.shouldInsertActivity=!0)&&this.quickbaseService.insertActivity(s).subscribe(d=>{console.log("Activity inserted successfully",d),this.activityId=d,console.log("New activity ID:",this.activityId),this.isActivityAdded=!0,console.log("Added?",this.isActivityAdded),this.quickbaseService.isActivityAddedOnce=!0,console.log("Added Once?",this.quickbaseService.isActivityAddedOnce)},d=>{console.error("Error inserting activity:",d)})}updateAttendanceRecords(i){this.residentData.filter(s=>!s.AttendanceStatus).length>0?this.message="Please select an attendance status for all participants.":(this.allResidentsSelected=!0,this.residentData.forEach((s,d)=>{var g;console.log("Resident:",s),console.log("AttendanceStatus:",s.AttendanceStatus);const l=null===(g=this.residentForm.get("residents"))||void 0===g||null===(g=g.get(d.toString()))||void 0===g?void 0:g.get("Comments");console.log("Comments:",null==l?void 0:l.value);const h=s.recordNumber2.value,W=i;this.activityId?this.quickbaseService.getAttendance(h,this.activityId).pipe((0,M.k)(p=>{var m;const y=null===(m=p.data[0])||void 0===m?void 0:m[3];return console.log("Attendance record ID:",y),y}),(0,k.O)(p=>{console.log("mergeMap check for attendanceID:",p);const m=p.value,y={11:{value:s.AttendanceStatus?s.AttendanceStatus:null},7:{value:null!=l&&l.value?null==l?void 0:l.value:null}};return console.log("updated Attendance record with Body",W,m,y),this.quickbaseService.updateAttendance(m,y)})).subscribe(p=>{console.log("Attendance record updated successfully for resident",h,":",p)},p=>{console.error("Error updating attendance record for resident",h,":",p)}):console.log("Activity ID is not set")}),this.attendanceUpdated=!0)}goBack(){this.location.back()}ngOnInit(){const i=this.router.getCurrentNavigation(),n=null==i?void 0:i.extras.state;n&&(this.theHouseName=n.theHouseName,this.HouseLeaderName=n.HouseLeaderName,this.HLphone=n.HLphone),this.residentDataSubscription=this.quickbaseService.residentData.subscribe(s=>{s&&Array.isArray(s)&&(this.residentForm=this.formBuilder.group({residents:this.formBuilder.array(s.map(d=>this.formBuilder.group({...d,AttendanceStatus:"",Comments:[""]})))}))})}ngOnDestroy(){this.residentDataSubscription&&this.residentDataSubscription.unsubscribe()}}return(t=r).\u0275fac=function(i){return new(i||t)(e.GI1(C.i),e.GI1(v.gV),e.GI1(v.E5),e.GI1(f.oB),e.GI1(c.im))},t.\u0275cmp=e.In1({type:t,selectors:[["HOMMA-weekly",8,"meetings"]],attrs:P,decls:32,vars:11,consts:[[3,"translucent"],["color","Primary"],[3,"fullscreen"],[1,"ion-text-center"],["src","assets/logo/HOM.png","alt","Logo"],[1,"ion-text-left"],["size","1","size-md","2","size-lg","3"],["size","10","size-md","8","size-lg","6"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"wrapper"],["class","ion-activatable ripple-parent rounded-rectangle ripple-effect-lightblue",3,"click",4,"ngIf"],["class","message",4,"ngIf"],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-blue",3,"click"],[3,"formGroup"],["formControlName","ActivityDesc","label","Enter Activity Description","labelPlacement","floating","placeholder","Please the description of the activity here","value","","autoGrow","true",1,"bordered-input"],[4,"ngFor","ngForOf"],["value","",3,"ngModel","ngModelChange"],["labelPlacement","end","value","Present"],["labelPlacement","end","value","Excused Absence"],["labelPlacement","end","value","Unexcused Absence"],["labelPlacement","end","value","Excused Tardy"],["labelPlacement","end","value","Unexcused Tardy"],["formArrayName","residents"],[3,"formGroupName"],["formControlName","Comments","label","Comments","labelPlacement","floating","placeholder","Please provide reason for unexcused tardiness or absence here","autoGrow","true",1,"bordered-input"],[1,"ion-activatable","ripple-parent","rounded-rectangle","ripple-effect-lightblue",3,"click"],[1,"message"]],template:function(i,n){1&i&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e.OEk(3," HOM Mobile Assistant - Weekly House Meetings "),e.C$Y()()(),e.I0R(4,"ion-content",2)(5,"ion-card",3),e.wR5(6,"img",4)(7,"br"),e.I0R(8,"ion-card-header")(9,"ion-card-title",3),e.OEk(10),e.C$Y(),e.I0R(11,"ion-card-subtitle",5),e.OEk(12),e.wR5(13,"br"),e.OEk(14),e.wR5(15,"br")(16,"p"),e.C$Y()()(),e.I0R(17,"ion-grid")(18,"ion-row"),e.wR5(19,"ion-col",6),e.I0R(20,"ion-col",7),e.yuY(21,A,2,1,"form",8),e.C$Y(),e.wR5(22,"ion-col",6),e.C$Y()(),e.yuY(23,O,4,3,"div",9),e.I0R(24,"div",10),e.yuY(25,_,3,0,"div",11)(26,I,3,0,"div",11)(27,R,2,1,"div",12)(28,G,2,0,"div",12),e.I0R(29,"div",13),e.qCj("click",function(){return n.goBack()}),e.OEk(30," Back to Home "),e.wR5(31,"ion-ripple-effect"),e.C$Y()()()),2&i&&(e.E7m("translucent",!0),e.yG2(4),e.E7m("fullscreen",!0),e.yG2(6),e.oRS("",n.theHouseName," Participants"),e.yG2(2),e.oRS("House Leader: ",n.HouseLeaderName,""),e.yG2(2),e.oRS(" Phone: ",n.HLphone,""),e.yG2(7),e.E7m("ngIf",!n.isActivityAdded&&!n.quickbaseService.isActivityAddedOnce),e.yG2(2),e.E7m("ngIf",n.isActivityAdded),e.yG2(2),e.E7m("ngIf",!n.isActivityAdded&&!n.quickbaseService.isActivityAddedOnce),e.yG2(),e.E7m("ngIf",n.isActivityAdded&&!n.attendanceUpdated),e.yG2(),e.E7m("ngIf",!n.allResidentsSelected),e.yG2(),e.E7m("ngIf",n.attendanceUpdated))},dependencies:[f.ay,f.u_,c.sz,c.ue,c.u,c._G,a.KC,a.Gg,a.YY,a.MN,a.I7,a.Kk,a._i,a.YP,a.wB,a.CS,a.ue,a.mA,a.qo,a.gP,a.tM,a.Md,a.Gv,a.IT,a.qG,c.uW,c.Wo,c.Kh,c.uE,v.cP,f.a],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color: #4194ab !important;--ion-color-base: #fff !important}ion-title[_ngcontent-%COMP%]{--ion-color-base: #fff !important;font-size:16px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:0;font-weight:700}ion-card-subtitle[_ngcontent-%COMP%]{--ion-color-base: #fff !important;font-size:12px;padding-top:10;margin-top:5px}ion-card-title[_ngcontent-%COMP%]{text-align:left}.error-message[_ngcontent-%COMP%]{color:red;font-size:20px;margin-top:10px}ion-grid.main[_ngcontent-%COMP%]{--ion-grid-padding: 20px;--ion-grid-padding-xs: 20px;--ion-grid-padding-sm: 20px;--ion-grid-padding-md: 20px;--ion-grid-padding-lg: 20px;--ion-grid-padding-xl: 20px;--ion-grid-column-padding: 30px;--ion-grid-column-padding-xs: 30px;--ion-grid-column-padding-sm: 30px;--ion-grid-column-padding-md: 30px;--ion-grid-column-padding-lg: 30px;--ion-grid-column-padding-xl: 30px}ion-col.main[_ngcontent-%COMP%]{background-color:transparent;border:solid 1px #4194ab;color:#0a056f;text-align:center}.bordered-input[_ngcontent-%COMP%]{box-sizing:border-box;border:1px solid #000;border-radius:5px;margin:10px 0;padding:0 15px}.message[_ngcontent-%COMP%]{color:red;font-weight:700}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px;line-height:18px}.fields-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;line-height:16px;color:#2b9c4d;margin:0}.info-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.info-item[_ngcontent-%COMP%]{margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-buttons[_ngcontent-%COMP%]{font-size:1.1em}.ripple-effect-blue[_ngcontent-%COMP%]{color:#010384}.ripple-effect-lightblue[_ngcontent-%COMP%]{color:#00c8ff}.ripple-effect-red[_ngcontent-%COMP%]{color:#980707}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;text-align:center;height:100px;width:300px;margin:0 auto}b[_ngcontent-%COMP%]{width:100%}.ripple-parent[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;border:1px solid #4194ab;width:100%;height:50px;border-radius:8px}.rounded-rectangle[_ngcontent-%COMP%]{width:300px;height:30px;border-radius:8px}"]}),r})()}];let E=(()=>{var t;class r{}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[v.qQ.forChild(w),v.qQ]}),r})(),S=(()=>{var t;class r{}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[f.MD,c.y,a.wZ,c.sl,E]}),r})()}}]);