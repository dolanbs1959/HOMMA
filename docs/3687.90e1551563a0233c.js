"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{3687:(T,b,l)=>{l.r(b),l.d(b,{LoginPageModule:()=>S});var u=l(6814),d=l(95),n=l(849),h=l(4408),P=l(9397),L=l(7398),e=l(9212),x=l(6311);function D(i,a){if(1&i&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&i){const s=e.oxw();e.xp6(),e.hij(" ",s.errorMessage," ")}}function N(i,a){if(1&i&&(e.TgZ(0,"ion-select-option",11),e._uU(1),e.qZA()),2&i){const s=a.$implicit;e.Q6J("value",s),e.xp6(),e.hij(" ",s," ")}}const Z=[{path:"",component:(()=>{var i;class a{constructor(o,t){this.router=o,this.quickbaseService=t,this.houseNames=[],this.housename="",this.staffID="",this.HLphone="",this.maxMeetingDate="",this.errorMessage="",this.recordNumber=0,this.savedRecordNumber=0,this.houseNames$=this.quickbaseService.getHouseNames().pipe((0,P.b)(c=>console.log("API response:",c)),(0,L.U)(c=>c))}ngOnInit(){this.quickbaseService.errorMessage$.subscribe(o=>{this.errorMessage=o})}login(){console.log("Login method called"),Fingerprint.isAvailable(this.isAvailableSuccess.bind(this),this.isAvailableError.bind(this))}isAvailableSuccess(o){console.log("Fingerprint is available",o),Fingerprint.show({clientId:"Fingerprint-Demo",clientSecret:"password"},this.successCallback.bind(this),this.errorCallback.bind(this))}isAvailableError(o){console.log("Fingerprint is not available",o)}successCallback(){console.log("Fingerprint was successfully verified."),this.continueLogin()}errorCallback(o){console.log("Fingerprint verification failed",o)}continueLogin(){console.log("Housename:",this.housename),console.log("StaffID:",this.staffID),console.log("HLphone:",this.HLphone),console.log("MaxMeetingDate:",this.maxMeetingDate),this.quickbaseService.query(this.housename,this.staffID).subscribe(o=>{if(o){var t,c,r,m;const f=null===(t=o.theHouseName)||void 0===t?void 0:t.value,p=null===(c=o.HouseLeaderName)||void 0===c?void 0:c.value,M=null===(r=o.HLphone)||void 0===r?void 0:r.value;this.recordNumber=o.recordNumber,this.savedRecordNumber=this.recordNumber,this.maxMeetingDate=null===(m=o.maxMeetingDate)||void 0===m?void 0:m.value,console.log("Record number after setting:",this.savedRecordNumber),this.quickbaseService.queryData=o,console.log("Query data:",this.quickbaseService.queryData),this.quickbaseService.getResidents(this.savedRecordNumber).subscribe(g=>{console.log("savedRecord number:",this.savedRecordNumber),this.quickbaseService.residentData.next(g),console.log("Resident data:",g)}),this.quickbaseService.getPendingArrivals(this.savedRecordNumber).subscribe(g=>{console.log("Pending arrivals data:",g),this.quickbaseService.pendingArrivals.next(g)}),f&&p&&M&&this.quickbaseService.getMaxMeetingDate(f).subscribe(g=>{var v;this.maxMeetingDate=null===(v=g.data[0])||void 0===v?void 0:v[40].value,console.log("MaxMeetingDate:",this.maxMeetingDate),this.router.navigate(["/home",{theHouseName:f,HouseLeaderName:p,HLphone:M,maxMeetingDate:this.maxMeetingDate}])})}else console.error("No data found in the response")},o=>{console.error("API Error:",o)})}}return(i=a).\u0275fac=function(o){return new(o||i)(e.Y36(h.F0),e.Y36(x.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],decls:25,vars:8,consts:[[3,"translucent"],["color","Primary"],[3,"fullscreen"],[1,"ion-text-center"],["src","assets/logo/HOM.png","alt","Logo"],["class","error-message",4,"ngIf"],["label","House Name: ",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","StaffID",3,"ngModel","ngModelChange"],[3,"click"],[1,"error-message"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e._uU(3," HOM Mobile Assistant "),e.qZA()()(),e.TgZ(4,"ion-content",2)(5,"ion-card",3),e._UZ(6,"img",4),e.TgZ(7,"ion-card-header")(8,"ion-card-title"),e._uU(9,"Tap on the House Name and select your House from the list. Then enter your Staff ID."),e.qZA(),e.TgZ(10,"ion-card-subtitle")(11,"i"),e._uU(12,"Tap on the blue button to enter."),e.qZA()(),e.YNc(13,D,2,1,"div",5),e.qZA(),e.TgZ(14,"ion-card-content")(15,"ion-item")(16,"ion-select",6),e.Uc_("ngModelChange",function(r){return e.nJJ(t.housename,r)||(t.housename=r),r}),e.YNc(17,N,2,2,"ion-select-option",7),e.ALo(18,"async"),e.qZA()(),e._UZ(19,"br"),e.TgZ(20,"ion-item")(21,"ion-input",8),e.Uc_("ngModelChange",function(r){return e.nJJ(t.staffID,r)||(t.staffID=r),r}),e.qZA()(),e._UZ(22,"br"),e.TgZ(23,"ion-button",9),e.NdJ("click",function(){return t.login()}),e._uU(24,"Enter"),e.qZA()()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(9),e.Q6J("ngIf",t.errorMessage),e.xp6(3),e.E3D("ngModel",t.housename),e.xp6(),e.Q6J("ngForOf",e.lcZ(18,6,t.houseNames$)),e.xp6(4),e.E3D("ngModel",t.staffID))},dependencies:[u.sg,u.O5,d.JJ,d.On,n.YG,n.PM,n.FN,n.Zi,n.tO,n.Dq,n.W2,n.Gu,n.pK,n.Ie,n.t9,n.n0,n.wd,n.sr,n.QI,n.j9,u.Ov],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color: #4194ab !important;--ion-color-base: #fff !important}ion-card-title[_ngcontent-%COMP%]{text-align:center;font-size:22px}.error-message[_ngcontent-%COMP%]{color:red;font-size:20px;margin-top:10px}ion-button[_ngcontent-%COMP%]{--padding-start: 40px;--padding-end: 40px;--padding-top: 10px;--padding-bottom: 10px;--background: #4194ab;--color: #fff;--border-radius: 10px;font-size:18px;font-weight:bolder}"]}),a})()}];let A=(()=>{var i;class a{}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(Z),h.Bz]}),a})(),S=(()=>{var i;class a{}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,d.u5,n.Pc,A]}),a})()}}]);