"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{3687:(N,v,s)=>{s.r(v),s.d(v,{LoginPageModule:()=>Z});var b=s(6814),l=s(95),n=s(849),d=s(4408),e=s(9212),P=s(6311);function x(o,r){if(1&o&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&o){const g=e.oxw();e.xp6(),e.hij(" ",g.errorMessage," ")}}const D=[{path:"",component:(()=>{var o;class r{constructor(t,i){this.router=t,this.quickbaseService=i,this.housename="",this.staffID="",this.HLphone="",this.maxMeetingDate="",this.errorMessage="",this.recordNumber=0,this.savedRecordNumber=0}ngOnInit(){this.quickbaseService.errorMessage$.subscribe(t=>{this.errorMessage=t})}login(){console.log("Housename:",this.housename),console.log("StaffID:",this.staffID),console.log("HLphone:",this.HLphone),console.log("MaxMeetingDate:",this.maxMeetingDate),this.quickbaseService.query(this.housename,this.staffID).subscribe(t=>{if(t){var i,u,a,h;const m=null===(i=t.theHouseName)||void 0===i?void 0:i.value,M=null===(u=t.HouseLeaderName)||void 0===u?void 0:u.value,p=null===(a=t.HLphone)||void 0===a?void 0:a.value;this.recordNumber=t.recordNumber,this.savedRecordNumber=this.recordNumber,this.maxMeetingDate=null===(h=t.maxMeetingDate)||void 0===h?void 0:h.value,console.log("Record number after setting:",this.savedRecordNumber),this.quickbaseService.queryData=t,console.log("Query data:",this.quickbaseService.queryData),this.quickbaseService.getResidents(this.savedRecordNumber).subscribe(c=>{console.log("savedRecord number:",this.savedRecordNumber),this.quickbaseService.residentData.next(c),console.log("Resident data:",c)}),this.quickbaseService.getPendingArrivals(this.savedRecordNumber).subscribe(c=>{console.log("Pending arrivals data:",c),this.quickbaseService.pendingArrivals.next(c)}),m&&M&&p&&this.quickbaseService.getMaxMeetingDate(m).subscribe(c=>{var f;this.maxMeetingDate=null===(f=c.data[0])||void 0===f?void 0:f[40].value,console.log("MaxMeetingDate:",this.maxMeetingDate),this.router.navigate(["/home",{theHouseName:m,HouseLeaderName:M,HLphone:p,maxMeetingDate:this.maxMeetingDate}])})}else console.error("No data found in the response")},t=>{console.error("API Error:",t)})}}return(o=r).\u0275fac=function(t){return new(t||o)(e.Y36(d.F0),e.Y36(P.x))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:23,vars:5,consts:[[3,"translucent"],["color","Primary"],[3,"fullscreen"],[1,"ion-text-center"],["src","assets/logo/HOM.png","alt","Logo"],["class","error-message",4,"ngIf"],["placeholder","House Name",3,"ngModel","ngModelChange"],["type","text","placeholder","StaffID",3,"ngModel","ngModelChange"],[3,"click"],[1,"error-message"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e._uU(3," HOM Mobile Assistant "),e.qZA()()(),e.TgZ(4,"ion-content",2)(5,"ion-card",3),e._UZ(6,"img",4),e.TgZ(7,"ion-card-header")(8,"ion-card-title"),e._uU(9,"Enter your House name and your Staff ID, then click the blue button to enter."),e.qZA(),e.TgZ(10,"ion-card-subtitle")(11,"i"),e._uU(12,"Enter the House name as two words; e.g., Amos House."),e.qZA()(),e.YNc(13,x,2,1,"div",5),e.qZA(),e.TgZ(14,"ion-card-content")(15,"ion-item")(16,"ion-input",6),e.Uc_("ngModelChange",function(a){return e.nJJ(i.housename,a)||(i.housename=a),a}),e.qZA()(),e._UZ(17,"br"),e.TgZ(18,"ion-item")(19,"ion-input",7),e.Uc_("ngModelChange",function(a){return e.nJJ(i.staffID,a)||(i.staffID=a),a}),e.qZA()(),e._UZ(20,"br"),e.TgZ(21,"ion-button",8),e.NdJ("click",function(){return i.login()}),e._uU(22,"Enter"),e.qZA()()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(9),e.Q6J("ngIf",i.errorMessage),e.xp6(3),e.E3D("ngModel",i.housename),e.xp6(3),e.E3D("ngModel",i.staffID))},dependencies:[b.O5,l.JJ,l.On,n.YG,n.PM,n.FN,n.Zi,n.tO,n.Dq,n.W2,n.Gu,n.pK,n.Ie,n.wd,n.sr,n.j9],styles:["ion-header[_ngcontent-%COMP%]{--ion-background-color: #4194ab !important;--ion-color-base: #fff !important}ion-card-title[_ngcontent-%COMP%]{text-align:center;font-size:22px}.error-message[_ngcontent-%COMP%]{color:red;font-size:20px;margin-top:10px}ion-button[_ngcontent-%COMP%]{--padding-start: 40px;--padding-end: 40px;--padding-top: 10px;--padding-bottom: 10px;--background: #4194ab;--color: #fff;--border-radius: 10px;font-size:18px;font-weight:bolder}"]}),r})()}];let L=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(D),d.Bz]}),r})(),Z=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[b.ez,l.u5,n.Pc,L]}),r})()}}]);